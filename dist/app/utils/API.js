//>>built
define("app/utils/API",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/xhr","app/store/StoreManager"],function(d,f,g,e,h){d=d("app.utils.API",[],{});f.mixin(app.utils.API,{get:function(a,b,c){if(typeof c=="undefined"||c==null)c=!0;if(typeof b=="undefined"||b==null)b={};if(typeof __.user.auth_token!=="undefined")b["X-Auth-Token"]=__.user.auth_token;typeof a=="string"&&a.indexOf(dojo.config.appSpecific.api_host)==-1&&(a=dojo.config.appSpecific.api_host+a);return e.get({url:a,
handleAs:"json",headers:b,showLoader:c})},testGet:function(a,b){app.utils.API.get(a,b).then(function(a){console.log(a)})},post:function(a,b,c){if(typeof c=="undefined"||c==null)c={};if(typeof __.user.auth_token!=="undefined")c["X-Auth-Token"]=__.user.auth_token;typeof a=="string"&&a.indexOf(dojo.config.appSpecific.api_host)==-1&&(a=dojo.config.appSpecific.api_host+a);return e("POST",{url:a,postData:JSON.stringify(b),handleAs:"json",headers:c})},put:function(a,b,c){if(typeof b.id=="undefined")return console.warn("can't put without an id, url = "+
a),null;else{if(typeof c=="undefined"||c==null)c={};if(typeof __.user.auth_token!=="undefined")c["X-Auth-Token"]=__.user.auth_token;typeof a=="string"&&a.indexOf(dojo.config.appSpecific.api_host)==-1&&(a=dojo.config.appSpecific.api_host+a);a+="?id="+b.id;return e("PUT",{url:a,postData:JSON.stringify(b),handleAs:"json",headers:c})}},testPost:function(a,b,c){app.utils.API.post(a,b,c).then(function(a){console.log(a)})},testPut:function(a,b,c){a=app.utils.API.put(a,b,c);a!=null&&a.then(function(a){console.log(a)})},
list:function(a,b,c,d){a=h.getInstance().getStore(a,c).query({});a.then&&a.then(function(a){typeof d=="function"?typeof b=="function"&&b(g.filter(a,d)):typeof b=="function"&&b(a)})}});return d});