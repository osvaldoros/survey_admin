//>>built
define("app/form/FilteringSelect",["dojo/_base/array","dojo/_base/declare","dijit/form/FilteringSelect","dojo/store/Memory","dojo/store/JsonRest","dojo/dom-attr","dojo/_base/lang","dijit/form/ComboBox","dijit/Tooltip","app/store/GridFormatters","app/store/UIStores"],function(l,i,j,g,h,m,f,n,o,p,k){return i("app.form.FilteringSelect",j,{storeSet:!1,pendingValue:void 0,queryExpr:"*${0}*",searchDelay:250,hasToolTip:!1,pageSize:25,uiStores:k.getInstance(),startup:function(){this.inherited(arguments);
if(typeof this.store=="object"&&this.store!=null&&this.store.hasOwnProperty("config")){var a=this.store.config;if(typeof a.selectFirst!="undefined")this._selectFirst=a.selectFirst;var b=void 0;if(typeof a.filterCondition!="undefined")this.filterCondition=a.filterCondition,b=f.hitch(this,"filterBasedOnCondition");f.isArray(a.array)?this.uiStores.populateComboArray(this,a.array,b):typeof a.url=="string"?this.uiStores.populateComboDynamicREST(this,__.urls[a.url],a.base_query):typeof a.uiStore=="string"&&
this.uiStores.populateCombo(this,f.hitch(this.uiStores,a.uiStore),b)}},filterBasedOnCondition:function(a){if(typeof a=="object"&&a!=null&&typeof this.filterCondition=="object"&&this.filterCondition!=null)return this.evaluateClause(a,this.filterCondition)},evaluateClause:function(a,b){var c=!0,d;for(d in b){var e=b[d];if(f.isArray(e))return f.isArray(e)&&d.toUpperCase()=="AND"?this.ANDClauses(a,e):f.isArray(e)&&d.toUpperCase()=="OR"?this.ORClauses(a,e):!1;else c=a.hasOwnProperty(d)?c&&a[d]==e:!1}return c},
ANDClauses:function(a,b){for(var c=!0,d=b.length-1;d>=0;d--)var e=b[d],c=c&&this.evaluateClause(a,e);return c},ORClauses:function(a,b){for(var c=!1,d=b.length-1;d>=0;d--)var e=b[d],c=c||this.evaluateClause(a,e);return c},onBlur:function(){this.closeToolTip!=void 0&&this.closeToolTip!=null&&dijit.hideTooltip(dojo.byId(this.closeToolTip))},_setStoreAttr:function(a){this.inherited(arguments);if(a.isInstanceOf&&a.isInstanceOf(g)){if(a.data.length>0&&(this.storeSet=!0,typeof this.pendingValue!="undefined"))this.set("value",
this.pendingValue.value,this.pendingValue.priorityChange,this.pendingValue.displayedValue,this.pendingValue.item),this.pendingValue=void 0}else if(a.isInstanceOf&&a.isInstanceOf(h)&&(this.storeSet=!0,typeof this.pendingValue!="undefined"))this.set("value",this.pendingValue.value,this.pendingValue.priorityChange,this.pendingValue.displayedValue,this.pendingValue.item),this.pendingValue=void 0;if(this.storeSet&&this._selectFirst){var b=this;this.getFirstValue(function(a){b.set("value",a)})}},getFirstValue:function(a){var b=
this.store;if(b.isInstanceOf&&b.isInstanceOf(g))if(b=b.data[0],typeof b=="object"&&b!=null)return a(b.id),b.id;else{if(typeof b=="string")return a(b),b}else if(b.isInstanceOf&&b.isInstanceOf(h))return b=b.getFirstValue(),a(b),b},excludeProperties:{$ref:!0,org_path:!0,id:!0,confirmation:!0,salt:!0},toolTipFunction:function(a){var b="";if(a!=void 0){b+="<div class='moreInfo'>";b+="<h2>"+a.name+"</h2>";b+="<ul>";for(var c in a)if(!this.excludeProperties[c]){var d=null;if(typeof a[c]=="string")d=a[c];
else if(typeof a[c]=="object"&&a[c]!=null&&a[c].hasOwnProperty("name"))d=a[c].name;d!=null&&(d.length>30&&(d=d.substring(0,30)+"..."),b+="<li><strong>"+c+"</strong> : "+d+"</li>")}b+="</ul>";b+="</div>"}return b},openDropDown:function(){this.inherited(arguments);this._onDropDownClick()},_onDropDownClick:function(){var a=this;if(this.dropDown){var b=this.dropDown.onHover;this.dropDown.onHover=function(){return function(d){b.apply(this,arguments);if(a.hasToolTip){var c=a.toolTipFunction(d.item);if(c!=
"")a.closeToolTip=arguments[0],dijit.showTooltip(c,dojo.byId(arguments[0].id))}}}();var c=this.dropDown.onUnhover;this.dropDown.onUnhover=function(){return function(b){c.apply(this,arguments);a.hasToolTip&&b.item!=void 0&&b.item!=null&&(b.item.hasLink==void 0||b.item.hasLink==null||b.item.hasLink==!1)&&dijit.hideTooltip(dojo.byId(arguments[0].id))}}()}},_setValueAttr:function(a,b,c,d){this.storeSet==!0?this.inherited(arguments):this.pendingValue={value:a,priorityChange:b,displayedValue:c,item:d}}})});