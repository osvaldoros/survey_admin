//>>built
define("app/store/StoreManager",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/store/Memory","dojo/store/Observable","dojo/store/Cache","app/store/QueryResults","app/store/JsonRest"],function(f,m,n,l,j,o,p,h){f=f("app.store.StoreManager",[],{stores:{},baseQueries:{},getStore:function(a,b){if(typeof this.baseQueries=="undefined")this.baseQueries={};typeof b!="undefined"&&(this.baseQueries[a]=b);if(typeof this.stores=="undefined")this.stores={};if(typeof this.stores[a]!="undefined")return this.stores[a];
var e=this,d=h({target:a,idProperty:"id",query:function(k,b){var g=e.computeBaseQuery(a,k,b);if(g!=!1){var c={},d;for(d in k)c[d]=k[d];for(var i in g)c[i]=g[i];c.parent&&(c="parent="+c.parent);return h.prototype.query.call(this,c,b)}else return p([])},get:function(b,d){var g=e.computeBaseQuery(a,b,d);if(g!=!1){var c={};if(typeof b=="string")c.id=b;else for(var f in b)c[f]=b[f];for(var i in g)c[i]=g[i];c.parent&&(c="parent="+c.parent);return h.prototype.get.call(this,c,d)}else return null}}),d=dojo.config.appSpecific.cache==
!0?j(o(d,l())):j(d);return this.stores[a]=d},getArrayStore:function(a,b,e,d,f){typeof d=="function"&&(a=n.filter(a,d));a=new l({data:a});if(typeof e=="function")a.getChildren=e;if(typeof f=="function")a.mayHaveChildren=f;e=j(a);if(b){var h=e.query;e.query=function(){var a=h.apply(this,arguments);a.observe(b);return a}}return e},computeBaseQuery:function(a,b){var e=this.baseQueries[a];if(e&&b)return this.getBaseQueryObject(e)},getBaseQueryObject:function(a){var b;typeof a=="function"?b=a():typeof a==
"object"&&(b=a);return b}});m.mixin(app.store.StoreManager,{getInstance:function(a){if(!app.store.StoreManager._instance)app.store.StoreManager._instance=new app.store.StoreManager(a);return app.store.StoreManager._instance}});return f});