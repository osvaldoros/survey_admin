//>>built
define("app/mixins/TabManager",["dojo/_base/declare","dojo/on","dojo/_base/lang","dojo/_base/array","dojo/topic","dojo/dom-class","app/utils/HashManager","app/loader/ModuleLoader","app/loader/DialogLauncher","app/mixins/DynamicFormModule"],function(k,p,e,q,r,s,l,m,n){return k([],{hashManager:l.getInstance(),repositionAfterUpdate:!0,_showTabs:!0,configureTabs:function(a){this.alternateStates=a.alternateStates;this.__tabContainer=a.tabs;this.__stepArray=a.steps||[];if(typeof a._showTabs!="undefined")this._showTabs=
a._showTabs;this.configureHashManagement(a);if(e.isArray(a.alternateStates))for(var b=this._attachPoints,d=b.length-1;d>=0;d--){var c=b[d];if(this.hasOwnProperty(c)){var c=this[c],f=!1;if(typeof c.isInstanceOf=="function"&&c.isInstanceOf(n)&&typeof c["class"]=="string"&&c["class"]!=""&&c["class"].toLowerCase().indexOf("includeinstates")!=-1)for(var g=c["class"].split(" "),h=g.length-1;h>=0;h--){for(var o=g[h],i=a.alternateStates.length-1;i>=0;i--){var j=a.alternateStates[i];typeof j.name=="string"&&
j.name.toLowerCase()==o.toLowerCase()&&(c.set("closeToState",j.mapsTo+"/"),f=!0);if(f)break}if(f)break}}}},configureHashManagement:function(a){a.hashManagement!=null&&typeof a.hashManagement=="object"?(this.__useHash=!0,this.__setHashFunction=e.hitch(this.hashManager,a.hashManagement.setHashFunction),this.__getHashFunction=e.hitch(this.hashManager,a.hashManagement.getHashFunction)):this.__useHash=!1},setCurrentState:function(a){if(a.indexOf("_step_")!=-1)var b=a,a=a.split("_step_").join(""),a=parseInt(a)>=
0?this.getStepName(parseInt(a)):b;this.inherited(arguments);this.getCurrentState()==""?(b=this.getFirstStepName(),b!=null&&(this.__useHash?this.__setHashFunction(b):this.setCurrentState(b))):this.isActive()&&this.selectChildByName(this.getCurrentState())},selectChildByName:function(a){a=this.getStepInfo(a);if(typeof a!="undefined"&&a!=null)a=a.tabChild,typeof a!="undefined"&&this.__tabContainer.selectChild(a)},getFirstStepName:function(){return this.getStepName(0)},getLastStepName:function(){return this.getStepName(this.getStepsArray().length-
1)},getStepName:function(a){a=this.getStepsArray()[a];return typeof a!="undefined"&&a!=null?a.title:null},getStepInfo:function(a){a=this.getStepIndex(a);if(a!=-1)return this.getStepsArray()[a];return null},getStepIndex:function(a){for(var b=0,d=this.getStepsArray().length;b<d;b++){var c=this.getStepsArray()[b];if(a.toLowerCase()==c.title.toLowerCase())return b}return-1},getStepsArray:function(){if(typeof this._currentSteps!="undefined"&&this._currentSteps!=null)return this._currentSteps;else if(typeof this.__stepArray!=
"undefined"&&this.__stepArray!=null)return this.__stepArray;return[]},onActivate:function(){if(typeof this.eventHandlers=="undefined")this.eventHandlers=[];this.createTabs();this.inherited(arguments)},createTabs:function(){var a=null,b=this;this._currentSteps=this.__stepArray.slice(0);typeof this.overviewStep!=void 0&&this.overviewStep!=null&&this.isUpdating&&this._currentSteps.unshift(this.overviewStep);for(var d=null,c=0,f=this._currentSteps.length;c<f;c++){var g=this._currentSteps[c],h=g.title;
g.onActivateCallBack=function(a){return function(){b.childActivated(a)}}(h);g.parentStack=this.__tabContainer;g.parentWizard=this;var e=new m(g);d==null&&(d=e);var i=this.getCurrentState();typeof h!="undefined"&&typeof i!="undefined"&&h!=null&&i!=null&&h.toLowerCase()==i.toLowerCase()&&(a=e);g.tabChild=e;this.__tabContainer.addChild(e)}a!=null&&this.isUpdating?this.__tabContainer.selectChild(a):a=d;this.refreshTabs(a)},childActivated:function(a){var b,d;this.__useHash?(b=this.__getHashFunction,d=
this.__setHashFunction):(b=e.hitch(this,"getCurrentState"),d=e.hitch(this,"setCurrentState"));b=b();a!=b&&(b=this.getModuleNameByAlternateState(b),b==!1?d(a):a!=b&&this.selectChildByName(b));this.repositionAfterUpdate&&typeof this.layout!="undefined"&&this.layout()},refreshTabs:function(){},getModuleNameByAlternateState:function(a){if(e.isArray(this.alternateStates))for(var b=this.alternateStates.length-1;b>=0;b--){var d=this.alternateStates[b];if(d.name.toLowerCase()==a.toLowerCase())return d.mapsTo}return!1},
callOnChildren:function(a){for(var b=this.__tabContainer.getChildren(),d=[],c=0;c<b.length;c++){var f=b[c];typeof f[a]=="function"&&(f=e.hitch(f,a),d.push(f()))}return d},setOnChildren:function(a,b,d){for(var c=this.__tabContainer.getChildren(),f=0;f<c.length;f++){var e=c[f];typeof e.set=="function"&&e.set(a,b,d)}},executeAfterNavigate:function(){this.callOnChildren("executeAfterNavigate")},destroyTabs:function(){typeof this.__tabContainer!="undefined"&&this.__tabContainer.destroyDescendants()},onDeactivate:function(){this.destroyTabs()}})});