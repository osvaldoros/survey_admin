//>>built
define("app/mixins/Activatable",["dojo/_base/declare","dojo/query","dojo/_base/lang","app/utils/HashManager","dojo/topic"],function(e,d,f,g,h){return e([],{hashManager:g.getInstance(),__module_active:!1,currentHash:null,usedLoader:!1,_updatingEntityTopicHanlder:null,startup:function(){this.inherited(arguments)},isActive:function(){return this.__module_active},updatingEntityReady:function(){typeof this._updatingEntityTopicHanlder=="object"&&this._updatingEntityTopicHanlder!=null&&this._updatingEntityTopicHanlder.remove();
this.activate()},activate:function(){if(this.__module_active!=!0)if(typeof this.getUpdatingEntity=="function"&&typeof this.parentWizard=="object"&&this.parentWizard!=null&&typeof this.getUpdatingEntity()=="undefined")this._updatingEntityTopicHanlder=h.subscribe(this.parentWizard.id+"-entity-ready",f.hitch(this,"updatingEntityReady"));else{this.loghashId="";if(typeof this.hashId!="undefined")this.loghashId=this.hashId;if(!(typeof this.parentStack!="undefined"&&typeof this.parentStack.selectedChildWidget!=
"undefined"&&this.parentStack.selectedChildWidget.id!=this.id)||!(typeof this.parentStack.selectedChildWidget.module=="undefined"||this.parentStack.selectedChildWidget.module.id!=this.id)){this.__module_active=!0;if(typeof this.refreshState!="undefined"){var a=null;if(this.topModule)this.hashChangeHandle=dojo.subscribe("/__/hashchange",this,this._onActivatableHashChange),a=this.setStateFromHash(this.hashManager.getHash());a||(a==null?this.refreshState():a==!1&&this.refreshState(!0),this.activateChildren(this.getActivateEligibleComponents()))}else this.activateChildren(this.getActivateEligibleComponents()),
this.topModule&&typeof this.hashId!="undefined"&&(this.hashManager.getLastModuleURL(this.hashId)!=null?this.hashManager.setHash(this.hashManager.getLastModuleURL(this.hashId)):this.hashManager.setHash(this.hashId));if(typeof this.onActivate!="undefined")this.onActivate();if(typeof this.onActivateCallBack!="undefined")this.onActivateCallBack()}}},deactivate:function(){if(this.__module_active&&(this.__module_active=!1,typeof this.hashChangeHandle!="undefined"&&this.hashChangeHandle.remove(),this.deactivateChildren(this.getActivateEligibleComponents()),
typeof this.onDeactivate!="undefined"))this.onDeactivate()},activateChildren:function(a){for(var b=a.length-1;b>=0;b--){var c=this.getWidget(a[b].id);typeof c!="undefined"&&typeof c.activate!="undefined"&&c.activate()}},driveChildrenState:function(a){for(var b=a.length-1;b>=0;b--){var c=this.getWidget(a[b].id);if(typeof c!="undefined"&&typeof c.setCurrentState!="undefined"){var d=null;(d=this.hashManager.getNextHashState(this.getCurrentState()))&&c.setCurrentState(d)}}},deactivateChildren:function(a){for(var b=
a.length-1;b>=0;b--){var c=this.getWidget(a[b].id);typeof c!="undefined"&&typeof c.deactivate!="undefined"&&c.deactivate()}},getActivateEligibleComponents:function(){return typeof this.getStateActivatableComponents!="undefined"?this.getStateActivatableComponents():this.getActivatableComponents()},_onActivatableHashChange:function(a){this.setStateFromHash(a)},getActivatableComponents:function(){if(this instanceof dijit.layout.ContentPane&&this.getChildren().length==1){var a=this.getChildren()[0];return d("#"+
a.domNode.id+" > .activatable")}else return d("#"+this.domNode.id+" > .activatable")},parseHash:function(a){a=a.toLowerCase();if(a!=this.__activatableCurrentHash){this.hashParams=this.hashManager.parseHash(a);var b=this.hashParams.hashPieces[0]==this.hashId;this.hashParams.moduleName=this.hashParams.hashPieces[0]=this.hashId;this.__activatableCurrentHash=a;return b}return!1},setStateFromHash:function(a){if(this.parseHash(a)&&typeof this.hashParams.stateName!="undefined")return this.setCurrentState(this.hashParams.stateName),
!0;return!1}})});