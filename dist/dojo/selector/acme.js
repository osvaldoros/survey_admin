//>>built
define("dojo/selector/acme",["../_base/kernel","../has","../dom","../_base/sniff","../_base/array","../_base/lang","../_base/window"],function(g,l,S){var F=g.trim,D=g.forEach,G=(g.isWebKit||g.isMozilla)&&g.doc.compatMode=="BackCompat",q=!1,v=function(){return!0},E=function(a){a+=">~+".indexOf(a.slice(-1))>=0?" * ":" ";for(var b=function(b,c){return F(a.slice(b,c))},c=[],d=-1,f=-1,e=-1,k=-1,o=-1,m=-1,w=-1,x="",g="",l,i=0,p=a.length,h=null,n=null,j=function(){if(m>=0)h.id=b(m,i).replace(/\\/g,""),m=
-1;if(w>=0){var a=w==i?null:b(w,i);h[">~+".indexOf(a)<0?"tag":"oper"]=a;w=-1}o>=0&&(h.classes.push(b(o+1,i).replace(/\\/g,"")),o=-1)};x=g,g=a.charAt(i),i<p;i++)if(x!="\\")if(h||(l=i,h={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return q?this.otag:this.tag}},w=i),d>=0)if(g=="]"){n.attr?n.matchFor=b(e||d+1,i):n.attr=b(d+1,i);if((d=n.matchFor)&&(d.charAt(0)=='"'||d.charAt(0)=="'"))n.matchFor=d.slice(1,-1);h.attrs.push(n);n=null;d=e=-1}else{if(g=="=")e="|~^$*".indexOf(x)>=
0?x:"",n.type=e+g,n.attr=b(d+1,i-e.length),e=i+1}else if(f>=0){if(g==")"){if(k>=0)n.value=b(f+1,i);k=f=-1}}else if(g=="#")j(),m=i+1;else if(g==".")j(),o=i;else if(g==":")j(),k=i;else if(g=="[")j(),d=i,n={};else if(g=="(")k>=0&&(n={name:b(k+1,i),value:null},h.pseudos.push(n)),f=i;else if(g==" "&&x!=g){j();k>=0&&h.pseudos.push({name:b(k+1,i)});h.loops=h.pseudos.length||h.attrs.length||h.classes.length;h.oquery=h.query=b(l,i);h.otag=h.tag=h.oper?null:h.tag||"*";if(h.tag)h.tag=h.tag.toUpperCase();if(c.length&&
c[c.length-1].oper)h.infixOper=c.pop(),h.query=h.infixOper.query+" "+h.query;c.push(h);h=null}return c},r=function(a,b){if(!a)return b;if(!b)return a;return function(){return a.apply(window,arguments)&&b.apply(window,arguments)}},s=function(a,b){var c=b||[];a&&c.push(a);return c},A=function(a){return 1==a.nodeType},t=function(a,b){if(!a)return"";if(b=="class")return a.className||"";if(b=="for")return a.htmlFor||"";if(b=="style")return a.style.cssText||"";return(q?a.getAttribute(b):a.getAttribute(b,
2))||""},H={"*=":function(a,b){return function(c){return t(c,a).indexOf(b)>=0}},"^=":function(a,b){return function(c){return t(c,a).indexOf(b)==0}},"$=":function(a,b){return function(c){c=" "+t(c,a);return c.lastIndexOf(b)==c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";return function(b){return(" "+t(b,a)+" ").indexOf(c)>=0}},"|=":function(a,b){var c=b+"-";return function(d){d=t(d,a);return d==b||d.indexOf(c)==0}},"=":function(a,b){return function(c){return t(c,a)==b}}},B=typeof g.doc.firstChild.nextElementSibling==
"undefined",y=!B?"nextElementSibling":"nextSibling",T=!B?"previousElementSibling":"previousSibling",z=B?A:v,I=function(a){for(;a=a[T];)if(z(a))return!1;return!0},J=function(a){for(;a=a[y];)if(z(a))return!1;return!0},C=function(a){var b=a.parentNode,c=0,d=b.children||b.childNodes,f=a._i||-1,e=b._l||-1;if(!d)return-1;d=d.length;if(e==d&&f>=0&&e>=0)return f;b._l=d;f=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[y])if(z(b))b._i=++c,a===b&&(f=c);return f},U=function(a){return!(C(a)%2)},V=function(a){return C(a)%
2},K={checked:function(){return function(a){return!!("checked"in a?a.checked:a.selected)}},"first-child":function(){return I},"last-child":function(){return J},"only-child":function(){return function(a){return I(a)&&J(a)}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;a>=0;a--){var c=b[a].nodeType;if(c===1||c==3)return!1}return!0}},contains:function(a,b){var c=b.charAt(0);if(c=='"'||c=="'")b=b.slice(1,-1);return function(a){return a.innerHTML.indexOf(b)>=0}},not:function(a,
b){var c=E(b)[0],d={el:1};if(c.tag!="*")d.tag=1;if(!c.classes.length)d.classes=1;var f=j(c,d);return function(a){return!f(a)}},"nth-child":function(a,b){var c=parseInt;if(b=="odd")return V;else if(b=="even")return U;if(b.indexOf("n")!=-1){var d=b.split("n",2),f=d[0]?d[0]=="-"?-1:c(d[0]):1,e=d[1]?c(d[1]):0,g=0,o=-1;f>0?e<0?e=e%f&&f+e%f:e>0&&(e>=f&&(g=e-e%f),e%=f):f<0&&(f*=-1,e>0&&(o=e,e%=f));if(f>0)return function(a){a=C(a);return a>=g&&(o<0||a<=o)&&a%f==e};else b=e}var m=c(b);return function(a){return C(a)==
m}}},W=g.isIE&&(g.isIE<9||g.isQuirks)?function(a){var b=a.toLowerCase();b=="class"&&(a="className");return function(c){return q?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},j=function(a,b){if(!a)return v;var b=b||{},c=null;"el"in b||(c=r(c,A));"tag"in b||a.tag!="*"&&(c=r(c,function(b){return b&&b.tagName==a.getTag()}));"classes"in b||D(a.classes,function(a,b){var e=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");c=r(c,function(a){return e.test(a.className)});
c.count=b});"pseudos"in b||D(a.pseudos,function(a){var b=a.name;K[b]&&(c=r(c,K[b](b,a.value)))});"attrs"in b||D(a.attrs,function(a){var b,e=a.attr;a.type&&H[a.type]?b=H[a.type](e,a.matchFor):e.length&&(b=W(e));b&&(c=r(c,b))});"id"in b||a.id&&(c=r(c,function(b){return!!b&&b.id==a.id}));c||"default"in b||(c=v);return c},X=function(a){return function(b,c,d){for(;b=b[y];)if(!B||A(b)){(!d||u(b,d))&&a(b)&&c.push(b);break}return c}},Y=function(a){return function(b,c,d){for(b=b[y];b;){if(z(b)){if(d&&!u(b,
d))break;a(b)&&c.push(b)}b=b[y]}return c}},Z=function(a){a=a||v;return function(b,c,d){for(var f=0,e=b.children||b.childNodes;b=e[f++];)z(b)&&(!d||u(b,d))&&a(b,f)&&c.push(b);return c}},L={},M=function(a){var b=L[a.query];if(b)return b;var c=a.infixOper,c=c?c.oper:"",d=j(a,{el:1}),f="*"==a.tag,e=g.doc.getElementsByClassName;if(c){e={el:1};if(f)e.tag=1;d=j(a,e);"+"==c?b=X(d):"~"==c?b=Y(d):">"==c&&(b=Z(d))}else if(a.id)d=!a.loops&&f?v:j(a,{el:1,id:1}),b=function(b,c){var f=S.byId(a.id,b.ownerDocument||
b);if(f&&d(f))if(9==b.nodeType)return s(f,c);else{for(var e=f.parentNode;e;){if(e==b)break;e=e.parentNode}if(e)return s(f,c)}};else if(e&&/\{\s*\[native code\]\s*\}/.test(String(e))&&a.classes.length&&!G)var d=j(a,{el:1,classes:1,id:1}),k=a.classes.join(" "),b=function(a,b,c){for(var b=s(0,b),f,e=0,g=a.getElementsByClassName(k);f=g[e++];)d(f,a)&&u(f,c)&&b.push(f);return b};else!f&&!a.loops?b=function(b,c,d){for(var c=s(0,c),f=0,e=b.getElementsByTagName(a.getTag());b=e[f++];)u(b,d)&&c.push(b);return c}:
(d=j(a,{el:1,tag:1,id:1}),b=function(b,c,f){for(var c=s(0,c),e,g=0,k=b.getElementsByTagName(a.getTag());e=k[g++];)d(e,b)&&u(e,f)&&c.push(e);return c});return L[a.query]=b},N={},O={},P=function(a){var b=E(F(a));if(b.length==1){var c=M(b[0]);return function(a){if(a=c(a,[]))a.nozip=!0;return a}}return function(a){for(var a=s(a),c,e,g=b.length,o,m,j=0;j<g;j++){m=[];c=b[j];e=a.length-1;if(e>0)o={},m.nozip=!0;e=M(c);for(var l=0;c=a[l];l++)e(c,m,o);if(!m.length)break;a=m}return m}},l=navigator.userAgent,
l=g.isWebKit&&l.indexOf("WebKit/")>0&&parseFloat(l.split("WebKit/")[1])>528,$=g.isIE?"commentStrip":"nozip",Q=!!g.doc.querySelectorAll&&(!g.isSafari||g.isSafari>3.1||l),aa=/n\+\d|([^ ])?([>~+])([^ =])?/g,ba=function(a,b,c,d){return c?(b?b+" ":"")+c+(d?" "+d:""):a},R=function(a,b){a=a.replace(aa,ba);if(Q){var c=O[a];if(c&&!b)return c}if(c=N[a])return c;var c=a.charAt(0),d=-1==a.indexOf(" ");a.indexOf("#")>=0&&d&&(b=!0);if(Q&&!b&&">~+".indexOf(c)==-1&&(!g.isIE||a.indexOf(":")==-1)&&!(G&&a.indexOf(".")>=
0)&&a.indexOf(":contains")==-1&&a.indexOf(":checked")==-1&&a.indexOf("|=")==-1){var f=">~+".indexOf(a.charAt(a.length-1))>=0?a+" *":a;return O[a]=function(b){try{if(!(9==b.nodeType||d))throw"";var c=b.querySelectorAll(f);c[$]=!0;return c}catch(e){return R(a,!0)(b)}}}else{var e=a.split(/\s*,\s*/);return N[a]=e.length<2?P(a):function(a){for(var b=0,c=[],d;d=e[b++];)c=c.concat(P(d)(a));return c}}},p=0,ca=g.isIE?function(a){return q?a.getAttribute("_uid")||a.setAttribute("_uid",++p)||p:a.uniqueID}:function(a){return a._uid||
(a._uid=++p)},u=function(a,b){if(!b)return 1;var c=ca(a);if(!b[c])return b[c]=1;return 0},da=function(a){if(a&&a.nozip)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);if(a.length<2)return b;p++;if(g.isIE&&q){var c=p+"";a[0].setAttribute("_zipIdx",c);for(var d=1,f;f=a[d];d++)a[d].getAttribute("_zipIdx")!=c&&b.push(f),f.setAttribute("_zipIdx",c)}else if(g.isIE&&a.commentStrip)try{for(d=1;f=a[d];d++)A(f)&&b.push(f)}catch(e){}else{a[0]&&(a[0]._zipIdx=p);for(d=1;f=a[d];d++)a[d]._zipIdx!=
p&&b.push(f),f._zipIdx=p}return b},l=function(a,b){var b=b||g.doc,c=b.ownerDocument||b.documentElement;q=b.contentType&&b.contentType=="application/xml"||g.isOpera&&(b.doctype||c.toString()=="[object XMLDocument]")||!!c&&(g.isIE?c.xml:b.xmlVersion||c.xmlVersion);if((c=R(a)(b))&&c.nozip)return c;return da(c)};l.filter=function(a,b,c){for(var d=[],f=E(b),f=f.length==1&&!/[^\w#\.]/.test(b)?j(f[0]):function(a){return g.query(b,c).indexOf(a)!=-1},e=0,k;k=a[e];e++)f(k)&&d.push(k);return d};return l});