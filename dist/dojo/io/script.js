//>>built
define("dojo/io/script",["../main"],function(d){d.getObject("io",!0,d);var f=d.isIE?"onreadystatechange":"load",g=/complete|loaded/;d.io.script={get:function(a){var c=this._makeScriptDeferred(a),b=c.ioArgs;d._ioAddQueryToUrl(b);d._ioNotifyStart(c);if(this._canAttach(b)){var e=this.attach(b.id,b.url,a.frameDoc);if(!b.jsonp&&!b.args.checkString)var h=d.connect(e,f,function(a){if(a.type=="load"||g.test(e.readyState))d.disconnect(h),b.scriptLoaded=a})}d._ioWatch(c,this._validCheck,this._ioCheck,this._resHandle);
return c},attach:function(a,c,b){var b=b||d.doc,e=b.createElement("script");e.type="text/javascript";e.src=c;e.id=a;e.async=!0;e.charset="utf-8";return b.getElementsByTagName("head")[0].appendChild(e)},remove:function(a,c){d.destroy(d.byId(a,c));this["jsonp_"+a]&&delete this["jsonp_"+a]},_makeScriptDeferred:function(a){var c=d._ioSetArgs(a,this._deferredCancel,this._deferredOk,this._deferredError),b=c.ioArgs;b.id=d._scopeName+"IoScript"+this._counter++;b.canDelete=!1;b.jsonp=a.callbackParamName||
a.jsonp;if(b.jsonp)b.query=b.query||"",b.query.length>0&&(b.query+="&"),b.query+=b.jsonp+"="+(a.frameDoc?"parent.":"")+d._scopeName+".io.script.jsonp_"+b.id+"._jsonpCallback",b.frameDoc=a.frameDoc,b.canDelete=!0,c._jsonpCallback=this._jsonpCallback,this["jsonp_"+b.id]=c;return c},_deferredCancel:function(a){a.canceled=!0;a.ioArgs.canDelete&&d.io.script._addDeadScript(a.ioArgs)},_deferredOk:function(a){a=a.ioArgs;a.canDelete&&d.io.script._addDeadScript(a);return a.json||a.scriptLoaded||a},_deferredError:function(a,
c){c.ioArgs.canDelete&&(a.dojoType=="timeout"?d.io.script.remove(c.ioArgs.id,c.ioArgs.frameDoc):d.io.script._addDeadScript(c.ioArgs));console.log("dojo.io.script error",a);return a},_deadScripts:[],_counter:1,_addDeadScript:function(a){d.io.script._deadScripts.push({id:a.id,frameDoc:a.frameDoc});a.frameDoc=null},_validCheck:function(){var a=d.io.script,c=a._deadScripts;if(c&&c.length>0){for(var b=0;b<c.length;b++)a.remove(c[b].id,c[b].frameDoc),c[b].frameDoc=null;d.io.script._deadScripts=[]}return!0},
_ioCheck:function(a){a=a.ioArgs;if(a.json||a.scriptLoaded&&!a.args.checkString)return!0;return(a=a.args.checkString)&&eval("typeof("+a+") != 'undefined'")},_resHandle:function(a){d.io.script._ioCheck(a)?a.callback(a):a.errback(Error("inconceivable dojo.io.script._resHandle error"))},_canAttach:function(){return!0},_jsonpCallback:function(a){this.ioArgs.json=a}};return d.io.script});