//>>built
define("dijit/_editor/html",["dojo/_base/lang","dojo/_base/sniff",".."],function(k,l,f){k.getObject("_editor",!0,f);f._editor.escapeXml=function(a,c){a=a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");c||(a=a.replace(/'/gm,"&#39;"));return a};f._editor.getNodeHtml=function(a){var c;switch(a.nodeType){case 1:var d=a.nodeName.toLowerCase();if(!d||d.charAt(0)=="/")return"";c="<"+d;var h=[],b;if(l("ie")&&a.outerHTML){b=a.outerHTML;b=b.substr(0,b.indexOf(">")).replace(/(['"])[^"']*\1/g,
"");for(var i=/(\b\w+)\s?=/g,g;g=i.exec(b);)if(g=g[1],g.substr(0,3)!="_dj")if((g=="src"||g=="href")&&a.getAttribute("_djrealurl"))h.push([g,a.getAttribute("_djrealurl")]);else{var e,j;switch(g){case "style":e=a.style.cssText.toLowerCase();break;case "class":e=a.className;break;case "width":if(d==="img"){(j=/width=(\S+)/i.exec(b))&&(e=j[1]);break}case "height":if(d==="img"){(j=/height=(\S+)/i.exec(b))&&(e=j[1]);break}default:e=a.getAttribute(g)}e!=null&&h.push([g,e.toString()])}}else for(i=0;b=a.attributes[i++];)if(e=
b.name,e.substr(0,3)!="_dj"){b=b.value;if(e=="src"||e=="href")a.getAttribute("_djrealurl")&&(b=a.getAttribute("_djrealurl"));h.push([e,b])}h.sort(function(a,b){return a[0]<b[0]?-1:a[0]==b[0]?0:1});for(i=0;b=h[i++];)c+=" "+b[0]+'="'+(k.isString(b[1])?f._editor.escapeXml(b[1],!0):b[1])+'"';if(d==="script")c+=">"+a.innerHTML+"</"+d+">";else if(a.childNodes.length)c+=">"+f._editor.getChildrenHtml(a)+"</"+d+">";else switch(d){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":c+=
" />";break;default:c+="></"+d+">"}break;case 4:case 3:c=f._editor.escapeXml(a.nodeValue,!0);break;case 8:c="<\!--"+f._editor.escapeXml(a.nodeValue,!0)+"--\>";break;default:c="<\!-- Element not recognized - Type: "+a.nodeType+" Name: "+a.nodeName+"--\>"}return c};f._editor.getChildrenHtml=function(a){var c="";if(!a)return c;for(var d=a.childNodes||a,h=!l("ie")||d!==a,b,i=0;b=d[i++];)if(!h||b.parentNode==a)c+=f._editor.getNodeHtml(b);return c};return f._editor});