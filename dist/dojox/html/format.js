//>>built
define("dojox/html/format",["dojo/_base/kernel","./entities","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(h,u,z,A,v){var m=h.getObject("dojox.html.format",!0);m.prettyPrint=function(m,j,l,w,B){var e=[],i=0,r=[],k="\t",f="",x=[],s,C=/[=]([^"']+?)(\s|>)/g,D=/style=("[^"]*"|'[^']*'|\S*)/gi,E=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;if(j&&j>0&&j<10){k="";for(s=0;s<j;s++)k+=" "}j=A.doc.createElement("div");j.innerHTML=m;var F=u.encode,G=u.decode,t=j.ownerDocument.createElement("div"),H=
function(a){a=a.cloneNode(!1);t.appendChild(a);a=t.innerHTML;t.innerHTML="";return a},n=function(){var a;for(a=0;a<i;a++)e.push(k)},o=function(){e.push("\n")},p=function(a){var b,d,a=a.split("\n");for(b=0;b<a.length;b++)a[b]=h.trim(a[b]);a=a.join(" ");a=h.trim(a);if(a!==""){var c=[];if(l&&l>0){var g="";for(b=0;b<i;b++)g+=k;b=g.length;g=l;for(l>b&&(g-=b);a;)if(a.length>l){for(b=g;b>0&&a.charAt(b)!==" ";b--);if(!b)for(b=g;b<a.length&&a.charAt(b)!==" ";b++);var e=a.substring(0,b),e=h.trim(e),a=h.trim(a.substring(b==
a.length?a.length:b+1,a.length));if(e){d="";for(b=0;b<i;b++)d+=k;e=d+e+"\n"}c.push(e)}else{d="";for(b=0;b<i;b++)d+=k;a=d+a+"\n";c.push(a);a=null}return c.join("")}else{d="";for(b=0;b<i;b++)d+=k;return d+a+"\n"}}else return""},I=function(a){if(a){var b=a;b&&(b=b.replace(/&quot;/gi,'"'),b=b.replace(/&gt;/gi,">"),b=b.replace(/&lt;/gi,"<"),b=b.replace(/&amp;/gi,"&"));for(var d,c,a=0,g=b.split("\n"),e=[],b=0;b<g.length;b++){var f=g[b],q=f.indexOf("\n")>-1;if(f=h.trim(f)){q=a;for(d=0;d<f.length;d++)c=f.charAt(d),
c==="{"?a++:c==="}"&&(a--,q=a);c="";for(d=0;d<i+q;d++)c+=k;e.push(c+f+"\n")}else q&&b===0&&e.push("\n")}a=e.join("")}return a},J=function(a){var b=a.nodeName.toLowerCase(),d=h.trim(H(a)),a=d.substring(0,d.indexOf(">")+1),a=a.replace(C,'="$1"$2'),a=a.replace(D,function(a){var b=a.substring(0,6),a=a.substring(6,a.length),c=a.charAt(0),a=h.trim(a.substring(1,a.length-1)),a=a.split(";"),d=[];z.forEach(a,function(a){if(a=h.trim(a))a=a.substring(0,a.indexOf(":")).toLowerCase()+a.substring(a.indexOf(":"),
a.length),d.push(a)});var d=d.sort(),a=d.join("; "),e=h.trim(a);return!e||e===";"?"":(a+=";",b+c+a+c)}),c=[],a=a.replace(E,function(a){c.push(h.trim(a));return""}),c=c.sort(),a="<"+b;c.length&&(a+=" "+c.join(" "));d.indexOf("</")!=-1?(r.push(b),a+=">"):(a+=B?" />":">",r.push(!1));a:switch(b){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "small":b=!0;break a;default:b=!1}x.push(b);
f&&!b&&(e.push(p(f)),f="");b?f+=a:(n(),e.push(a),o(),i++)},y=function(a){var b=a.childNodes;if(b){var d;for(d=0;d<b.length;d++){var c=b[d];if(c.nodeType===1){var g=h.trim(c.tagName.toLowerCase());if(!(v("ie")&&c.parentNode!=a)&&!(g&&g.charAt(0)==="/"))J(c),g==="script"?e.push(I(c.innerHTML)):g==="pre"?(c=c.innerHTML,v("mozilla")&&(c=c.replace("<br>","\n"),c=c.replace("<pre>",""),c=c.replace("</pre>","")),c.charAt(c.length-1)!=="\n"&&(c+="\n"),e.push(c)):y(c),c=x.pop(),f&&!c&&(e.push(p(f)),f=""),(g=
r.pop())?(g="</"+g+">",c?f+=g:(i--,n(),e.push(g),o())):i--}else c.nodeType===3||c.nodeType===4?f+=F(c.nodeValue,w):c.nodeType===8&&(c=G(c.nodeValue,w),n(),e.push("<\!--"),o(),i++,e.push(p(c)),i--,n(),e.push("--\>"),o())}}};y(j);f&&(e.push(p(f)),f="");return e.join("")};return m});