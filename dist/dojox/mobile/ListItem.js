//>>built
define("dojox/mobile/ListItem",["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/dom-construct","dojo/has","./common","./_ItemBase","./TransitionEvent"],function(h,n,k,i,d,c,j,f,l,m){return k("dojox.mobile.ListItem",l,{rightText:"",rightIcon:"",rightIcon2:"",anchorLabel:!1,noArrow:!1,selected:!1,checked:!1,arrowClass:"mblDomButtonArrow",checkClass:"mblDomButtonCheck",variableHeight:!1,rightIconTitle:"",rightIcon2Title:"",btnClass:"",btnClass2:"",
tag:"li",postMixInProperties:function(){if(this.btnClass)this.rightIcon=this.btnClass;this._setBtnClassAttr=this._setRightIconAttr;this._setBtnClass2Attr=this._setRightIcon2Attr},buildRendering:function(){this.domNode=this.srcNodeRef||c.create(this.tag);this.inherited(arguments);this.domNode.className="mblListItem"+(this.selected?" mblItemSelected":"");var a=this.box=c.create("DIV");a.className="mblListItemTextBox";if(this.anchorLabel)a.style.cursor="pointer";var b=this.srcNodeRef;if(b&&!this.label){this.label=
"";for(var d=0,g=b.childNodes.length;d<g;d++){var e=b.firstChild;if(e.nodeType===3&&i.trim(e.nodeValue)!=="")e.nodeValue=this._cv?this._cv(e.nodeValue):e.nodeValue,this.labelNode=c.create("SPAN",{className:"mblListItemLabel"}),this.labelNode.appendChild(e),e=this.labelNode;a.appendChild(e)}}if(!this.labelNode)this.labelNode=c.create("SPAN",{className:"mblListItemLabel"},a);if(this.anchorLabel)a.style.display="inline";b=this.anchorNode=c.create("A");b.className="mblListItemAnchor";this.domNode.appendChild(b);
b.appendChild(a)},startup:function(){if(!this._started){this.inheritParams();var a=this.getParent();if(this.moveTo||this.href||this.url||this.clickable||a&&a.select)this._onClickHandle=this.connect(this.anchorNode,"onclick","onClick");this.setArrow();if(d.contains(this.domNode,"mblVariableHeight"))this.variableHeight=!0;this.variableHeight&&(d.add(this.domNode,"mblVariableHeight"),setTimeout(i.hitch(this,"layoutVariableHeight")));this.set("icon",this.icon);!this.checked&&this.checkClass.indexOf(",")!==
-1&&this.set("checked",this.checked);this.inherited(arguments)}},resize:function(){this.variableHeight&&this.layoutVariableHeight()},onClick:function(a){if(!d.contains(a.currentTarget.parentNode,"mblItemSelected")){if(this.anchorLabel)for(var b=a.target;b.tagName!==this.tag.toUpperCase();b=b.parentNode)if(b.className=="mblListItemTextBox"){d.add(b,"mblListItemTextBoxSelected");setTimeout(function(){d.remove(b,"mblListItemTextBoxSelected")},j("android")?300:1E3);this.onAnchorLabelClicked(a);return}var c=
this.getParent();c.select&&(c.select==="single"?this.checked||this.set("checked",!0):c.select==="multiple"&&this.set("checked",!this.checked));this.select();if(this.href&&this.hrefTarget)f.openWindow(this.href,this.hrefTarget);else{var g;if(this.moveTo||this.href||this.url||this.scene)g={moveTo:this.moveTo,href:this.href,url:this.url,scene:this.scene,transition:this.transition,transitionDir:this.transitionDir};else if(this.transitionOptions)g=this.transitionOptions;if(g)return this.setTransitionPos(a),
(new m(this.domNode,g,a)).dispatch()}}},select:function(){var a=this.getParent();if(a.stateful)a.deselectAll();else{var b=this;setTimeout(function(){b.deselect()},j("android")?300:1E3)}d.add(this.domNode,"mblItemSelected")},deselect:function(){d.remove(this.domNode,"mblItemSelected")},onAnchorLabelClicked:function(){},layoutVariableHeight:function(){var a=this.anchorNode.offsetHeight;if(a!==this.anchorNodeHeight)this.anchorNodeHeight=a,h.forEach([this.rightTextNode,this.rightIcon2Node,this.rightIconNode,
this.iconNode],function(b){if(b)b.style.marginTop=Math.round((a-b.offsetHeight)/2)+"px"})},setArrow:function(){if(!this.checked){var a="",b=this.getParent();if(this.moveTo||this.href||this.url||this.clickable)if(!this.noArrow&&(!b||!b.stateful))a=this.arrowClass;a&&this._setRightIconAttr(a)}},_setIconAttr:function(a){if(this.getParent()){this.icon=a;var b=this.anchorNode;if(this.iconNode)c.empty(this.iconNode);else if(a)this.iconNode=c.create("DIV",{className:"mblListItemIcon"},this.rightIconNode||
this.rightIcon2Node||this.rightTextNode||this.box,"before");a&&a!=="none"?(f.createIcon(a,this.iconPos,null,this.alt,this.iconNode),this.iconPos&&d.add(this.iconNode.firstChild,"mblListItemSpriteIcon"),d.remove(b,"mblListItemAnchorNoIcon")):d.add(b,"mblListItemAnchorNoIcon")}},_setCheckedAttr:function(a){var b=this.getParent();b&&b.select==="single"&&a&&h.forEach(b.getChildren(),function(a){a.set("checked",!1)});this._setRightIconAttr(this.checkClass);var c=this.rightIconNode.childNodes;c.length===
1?this.rightIconNode.style.display=a?"":"none":(c[0].style.display=a?"":"none",c[1].style.display=!a?"":"none");d.toggle(this.domNode,"mblListItemChecked",a);if(b&&this.checked!==a)b.onCheckStateChanged(this,a);this.checked=a},_setRightTextAttr:function(a){if(!this.rightTextNode)this.rightTextNode=c.create("DIV",{className:"mblListItemRightText"},this.box,"before");this.rightText=a;this.rightTextNode.innerHTML=this._cv?this._cv(a):a},_setRightIconAttr:function(a){this.rightIconNode?c.empty(this.rightIconNode):
this.rightIconNode=c.create("DIV",{className:"mblListItemRightIcon"},this.rightIcon2Node||this.rightTextNode||this.box,"before");this.rightIcon=a;var b=(a||"").split(/,/);b.length===1?f.createIcon(a,null,null,this.rightIconTitle,this.rightIconNode):(f.createIcon(b[0],null,null,this.rightIconTitle,this.rightIconNode),f.createIcon(b[1],null,null,this.rightIconTitle,this.rightIconNode))},_setRightIcon2Attr:function(a){this.rightIcon2Node?c.empty(this.rightIcon2Node):this.rightIcon2Node=c.create("DIV",
{className:"mblListItemRightIcon2"},this.rightTextNode||this.box,"before");this.rightIcon2=a;f.createIcon(a,null,null,this.rightIcon2Title,this.rightIcon2Node)},_setLabelAttr:function(a){this.label=a;this.labelNode.innerHTML=this._cv?this._cv(a):a}})});