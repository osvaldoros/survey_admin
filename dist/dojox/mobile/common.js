//>>built
define("dojox/mobile/common",["dojo/_base/kernel","dojo/_base/array","dojo/_base/config","dojo/_base/connect","dojo/_base/lang","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/ready","dijit/registry","./sniff","./uacss"],function(t,p,g,i,v,e,h,n,k,u,q,l){var a=v.getObject("dojox.mobile",!0);a.getScreenSize=function(){return{h:e.global.innerHeight||e.doc.documentElement.clientHeight,w:e.global.innerWidth||e.doc.documentElement.clientWidth}};a.updateOrient=function(){var c=
a.getScreenSize();h.replace(e.doc.documentElement,c.h>c.w?"dj_portrait":"dj_landscape",c.h>c.w?"dj_landscape":"dj_portrait")};a.updateOrient();a.tabletSize=500;a.detectScreenSize=function(c){var b=a.getScreenSize(),d=Math.min(b.w,b.h),o,f;if(d>=a.tabletSize&&(c||!this._sz||this._sz<a.tabletSize))o="phone",f="tablet";else if(d<a.tabletSize&&(c||!this._sz||this._sz>=a.tabletSize))o="tablet",f="phone";f&&(h.replace(e.doc.documentElement,"dj_"+f,"dj_"+o),i.publish("/dojox/mobile/screenSize/"+f,[b]));
this._sz=d};a.detectScreenSize();a.setupIcon=function(a,b){if(a&&b){var d=p.map(b.split(/[ ,]/),function(a){return a-0}),e=d[0],f=d[1];k.set(a,{clip:"rect("+e+"px "+(d[1]+d[2])+"px "+(d[0]+d[3])+"px "+f+"px)",top:(a.parentNode?k.get(a,"top"):0)-e+"px",left:-f+"px"})}};a.hideAddressBarWait=typeof g.mblHideAddressBarWait==="number"?g.mblHideAddressBarWait:1500;a.hide_1=function(c){scrollTo(0,1);var b=a.getScreenSize().h+"px";if(l("android")){if(c)e.body().style.minHeight=b;a.resizeAll()}else if(c||
a._h===b&&b!==e.body().style.minHeight)e.body().style.minHeight=b,a.resizeAll();a._h=b};a.hide_fs=function(){e.body();e.body().style.minHeight=a.getScreenSize().h*2+"px";scrollTo(0,1);setTimeout(function(){a.hide_1(1);a._hiding=!1},1E3)};a.hideAddressBar=function(){if(!a.disableHideAddressBar&&!a._hiding)a._hiding=!0,a._h=0,e.body().style.minHeight=a.getScreenSize().h*2+"px",setTimeout(a.hide_1,0),setTimeout(a.hide_1,200),setTimeout(a.hide_1,800),setTimeout(a.hide_fs,a.hideAddressBarWait)};a.resizeAll=
function(c,b){if(!a.disableResizeAll){i.publish("/dojox/mobile/resizeAll",[c,b]);a.updateOrient();a.detectScreenSize();var d=function(a){var c=a.getParent&&a.getParent();return!(c&&c.resize||!a.resize)},e=function(a){p.forEach(a.getChildren(),function(a){d(a)&&a.resize();e(a)})};b?(b.resize&&b.resize(),e(b)):p.forEach(p.filter(q.toArray(),d),function(a){a.resize()})}};a.openWindow=function(a,b){e.global.open(a,b||"_blank")};a.createDomButton=function(c,b,d){if(!a._domButtons)if(l("webkit")){var e=
function(a,c){var b,d;if(!a){var c={},f=t.doc.styleSheets;for(b=0;b<f.length;b++)f[b]&&e(f[b],c);return c}f=a.cssRules||[];for(b=0;b<f.length;b++)if(d=f[b],d.href&&d.styleSheet)e(d.styleSheet,c);else if(d.selectorText){var m=d.selectorText.split(/,/);for(d=0;d<m.length;d++){var j=m[d],g=j.split(/>/).length-1;if(j.match(/(mblDomButton\w+)/)&&(j=RegExp.$1,!c[j]||g>c[j]))c[j]=g}}};a._domButtons=e()}else a._domButtons={};var f=c.className,m=d||c;if(f.match(/(mblDomButton\w+)/)&&f.indexOf("/")===-1){var r=
RegExp.$1,j=4;f.match(/(mblDomButton\w+_(\d+))/)?j=RegExp.$2-0:a._domButtons[r]!==void 0&&(j=a._domButtons[r]);f=null;l("bb")&&g.mblBBBoxShadowWorkaround!==!1&&(f={style:"-webkit-box-shadow:none"});for(var i=0,s=m;i<j;i++)s=s.firstChild||n.create("DIV",f,s);d&&(setTimeout(function(){h.remove(c,r)},0),h.add(d,r))}else if(f.indexOf(".")!==-1)n.create("IMG",{src:f},m);else return null;h.add(m,"mblDomButton");g.mblAndroidWorkaround!==!1&&l("android")>=2.2&&k.set(m,"webkitTransform","translate3d(0,0,0)");
b&&k.set(m,b);return m};a.createIcon=function(c,b,d,e,f){if(c&&c.indexOf("mblDomButton")===0)d&&d.className.match(/(mblDomButton\w+)/)?h.remove(d,RegExp.$1):d=n.create("DIV"),d.title=e,h.add(d,c),a.createDomButton(d);else if(c&&c!=="none"){if(!d||d.nodeName!=="IMG")d=n.create("IMG",{alt:e});d.src=(c||"").replace("${theme}",a.currentTheme);a.setupIcon(d,b);f&&b&&(c=b.split(/[ ,]/),k.set(f,{width:c[2]+"px",height:c[3]+"px"}))}f&&f.appendChild(d);return d};a._iw=g.mblIosWorkaround!==!1&&l("iphone");
if(a._iw)a._iwBgCover=n.create("div");g.parseOnLoad&&u(90,function(){var a=e.body().getElementsByTagName("*"),b,d,g;d=a.length;for(b=0;b<d;b++)if((g=a[b].getAttribute("dojoType"))&&a[b].parentNode.getAttribute("lazy")=="true")a[b].setAttribute("__dojoType",g),a[b].removeAttribute("dojoType")});u(function(){a.detectScreenSize(!0);g.mblApplyPageStyles!==!1&&h.add(e.doc.documentElement,"mobile");l("chrome")&&h.add(e.doc.documentElement,"dj_chrome");g.mblAndroidWorkaround!==!1&&l("android")>=2.2&&(g.mblAndroidWorkaroundButtonStyle!==
!1&&n.create("style",{innerHTML:"BUTTON,INPUT[type='button'],INPUT[type='submit'],INPUT[type='reset'],INPUT[type='file']::-webkit-file-upload-button{-webkit-appearance:none;}"},e.doc.head,"first"),l("android")<3?(k.set(e.doc.documentElement,"webkitTransform","translate3d(0,0,0)"),i.connect(null,"onfocus",null,function(){k.set(e.doc.documentElement,"webkitTransform","")}),i.connect(null,"onblur",null,function(){k.set(e.doc.documentElement,"webkitTransform","translate3d(0,0,0)")})):g.mblAndroid3Workaround!==
!1&&k.set(e.doc.documentElement,{webkitBackfaceVisibility:"hidden",webkitPerspective:8E3}));var c=a.resizeAll;if(g.mblHideAddressBar!==!1&&navigator.appVersion.indexOf("Mobile")!=-1||g.mblForceHideAddressBar===!0)if(a.hideAddressBar(),g.mblAlwaysHideAddressBar===!0)c=a.hideAddressBar;i.connect(null,e.global.onorientationchange!==void 0&&!l("android")?"onorientationchange":"onresize",null,c);var c=e.body().getElementsByTagName("*"),b,d=c.length,o;for(b=0;b<d;b++)if(o=c[b].getAttribute("__dojoType"))c[b].setAttribute("dojoType",
o),c[b].removeAttribute("__dojoType");if(t.hash){var f=function(a){if(!a)return[];for(var b=a=q.findWidgets(a),c=0;c<b.length;c++)a=a.concat(f(b[c].containerNode));return a};i.subscribe("/dojo/hashchange",null,function(c){var d=a.currentView;if(d){var e=a._params;if(!e){var c=c?c:a._defaultView.id,e=f(d.domNode),g=1,i="slide";for(b=0;b<e.length;b++){var h=e[b];if("#"+c==h.moveTo){i=h.transition;g=h instanceof a.Heading?-1:1;break}}e=[c,g,i]}d.performTransition.apply(d,e);a._params=null}})}e.body().style.visibility=
"visible"});q.getEnclosingWidget=function(a){for(;a;){var b=a.getAttribute&&a.getAttribute("widgetId");if(b)return q.byId(b);a=a._parentNode||a.parentNode}return null};return a});