//>>built
define("dojox/mobile/SpinWheelSlot",["dojo/_base/declare","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dijit/_Contained","dijit/_WidgetBase","./_ScrollableMixin"],function(j,i,g,h,k,l,m){return j("dojox.mobile.SpinWheelSlot",[l,k,m],{items:[],labels:[],labelFrom:0,labelTo:0,value:"",maxSpeed:500,minItems:15,centerPos:0,scrollBar:!1,constraint:!1,allowNestedScrolls:!1,androidWorkaroud:!1,buildRendering:function(){this.inherited(arguments);g.add(this.domNode,"mblSpinWheelSlot");var a,
b;if(this.labelFrom!==this.labelTo){this.labels=[];a=this.labelFrom;for(b=0;a<=this.labelTo;a++,b++)this.labels[b]=String(a)}if(this.labels.length>0){this.items=[];for(a=0;a<this.labels.length;a++)this.items.push([a,this.labels[a]])}this.containerNode=h.create("DIV",{className:"mblSpinWheelSlotContainer"});this.containerNode.style.height=(i.global.innerHeight||i.doc.documentElement.clientHeight)*2+"px";this.panelNodes=[];for(var c=0;c<3;c++){this.panelNodes[c]=h.create("DIV",{className:"mblSpinWheelSlotPanel"});
var d=this.items.length,e=Math.ceil(this.minItems/d);for(b=0;b<e;b++)for(a=0;a<d;a++)h.create("DIV",{className:"mblSpinWheelSlotLabel",name:this.items[a][0],innerHTML:this._cv?this._cv(this.items[a][1]):this.items[a][1]},this.panelNodes[c]);this.containerNode.appendChild(this.panelNodes[c])}this.domNode.appendChild(this.containerNode);this.touchNode=h.create("DIV",{className:"mblSpinWheelSlotTouch"},this.domNode);this.setSelectable(this.domNode,!1)},startup:function(){this.inherited(arguments);this.centerPos=
this.getParent().centerPos;this._itemHeight=this.panelNodes[1].childNodes[0].offsetHeight;this.adjust()},adjust:function(){for(var a=this.panelNodes[1].childNodes,b,c=0,d=a.length;c<d;c++){var e=a[c];if(e.offsetTop<=this.centerPos&&this.centerPos<e.offsetTop+e.offsetHeight){b=this.centerPos-(e.offsetTop+Math.round(e.offsetHeight/2));break}}a=this.panelNodes[0].offsetHeight;this.panelNodes[0].style.top=-a+b+"px";this.panelNodes[1].style.top=b+"px";this.panelNodes[2].style.top=a+b+"px"},setInitialValue:function(){this.items.length>
0&&this.setValue(this.value!==""?this.value:this.items[0][1])},getCenterPanel:function(){for(var a=this.getPos(),b=0,c=this.panelNodes.length;b<c;b++){var d=a.y+this.panelNodes[b].offsetTop;if(d<=this.centerPos&&this.centerPos<d+this.panelNodes[b].offsetHeight)return this.panelNodes[b]}return null},setColor:function(a){for(var b=0,c=this.panelNodes.length;b<c;b++)for(var d=this.panelNodes[b].childNodes,e=0;e<d.length;e++)d[e].innerHTML===String(a)?g.add(d[e],"mblSpinWheelSlotLabelBlue"):g.remove(d[e],
"mblSpinWheelSlotLabelBlue")},disableValues:function(a){for(var b=0,c=this.panelNodes.length;b<c;b++)for(var d=this.panelNodes[b].childNodes,e=0;e<d.length;e++){g.remove(d[e],"mblSpinWheelSlotLabelGray");for(var f=0;f<a.length;f++)if(d[e].innerHTML===String(a[f])){g.add(d[e],"mblSpinWheelSlotLabelGray");break}}},getCenterItem:function(){var a=this.getPos(),b=this.getCenterPanel();if(b)for(var a=a.y+b.offsetTop,b=b.childNodes,c=0,d=b.length;c<d;c++)if(a+b[c].offsetTop<=this.centerPos&&this.centerPos<
a+b[c].offsetTop+b[c].offsetHeight)return b[c];return null},getValue:function(){var a=this.getCenterItem();return a&&a.innerHTML},getKey:function(){return this.getCenterItem().getAttribute("name")},setValue:function(a){var b,c,d=this.getValue();if(d){this._penddingValue=void 0;for(var e=this.items.length,f=0;f<e;f++)if(this.items[f][1]===String(d)&&(b=f),this.items[f][1]===String(a)&&(c=f),b!==void 0&&c!==void 0)break;a=c-(b||0);e=a>0?a<e-a?-a:e-a:-a<e+a?-a:-(e+a);a=this.getPos();a.y+=e*this._itemHeight;
this.slideTo(a,1)}else this._penddingValue=a},getSpeed:function(){var a=0,b=this._time.length,c=(new Date).getTime()-this.startTime-this._time[b-1];b>=2&&c<200&&(a=this.calcSpeed(this._posY[b-1]-this._posY[b-6>=0?b-6:0],this._time[b-1]-this._time[b-6>=0?b-6:0]));return{x:0,y:a}},calcSpeed:function(){var a=this.inherited(arguments);if(!a)return 0;var b=Math.abs(a),c=a;b>this.maxSpeed&&(c=this.maxSpeed*(a/b));return c},adjustDestination:function(a){var b=this._itemHeight,c=a.y+Math.round(b/2);a.y=c-
(c>=0?c%b:c%b+b)},resize:function(){this._penddingValue&&this.setValue(this._penddingValue)},slideTo:function(a,b,c){var d=this.getPos(),e=d.y+this.panelNodes[1].offsetTop,f=e+this.panelNodes[1].offsetHeight,g=this.domNode.parentNode.offsetHeight;if(d.y<a.y){if(f>g)d=this.panelNodes[2],d.style.top=this.panelNodes[0].offsetTop-this.panelNodes[0].offsetHeight+"px",this.panelNodes[2]=this.panelNodes[1],this.panelNodes[1]=this.panelNodes[0],this.panelNodes[0]=d}else if(d.y>a.y&&e<0)d=this.panelNodes[0],
d.style.top=this.panelNodes[2].offsetTop+this.panelNodes[2].offsetHeight+"px",this.panelNodes[0]=this.panelNodes[1],this.panelNodes[1]=this.panelNodes[2],this.panelNodes[2]=d;this._initialized?Math.abs(this._speed.y)<40&&(b=0.2):(b=0,this._initialized=!0);this.inherited(arguments,[a,b,c])}})});