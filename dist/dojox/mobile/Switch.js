//>>built
define("dojox/mobile/Switch",["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/event","dojo/_base/window","dojo/dom-class","dijit/_Contained","dijit/_WidgetBase","./sniff"],function(h,f,i,j,g,e,k,l,d){return i("dojox.mobile.Switch",[l,k],{value:"on",name:"",leftLabel:"ON",rightLabel:"OFF",_width:53,buildRendering:function(){this.domNode=g.doc.createElement("DIV");this._swClass=(this.srcNodeRef&&this.srcNodeRef.className||this.className||this["class"]||"").replace(/ .*/,"");
this.domNode.className="mblSwitch";this.domNode.innerHTML='<div class="mblSwitchInner"><div class="mblSwitchBg mblSwitchBgLeft"><div class="mblSwitchText mblSwitchTextLeft"></div></div><div class="mblSwitchBg mblSwitchBgRight"><div class="mblSwitchText mblSwitchTextRight"></div></div><div class="mblSwitchKnob"></div><input type="hidden"'+(this.name?' name="'+this.name+'"':"")+"></div></div>";var a=this.inner=this.domNode.firstChild;this.left=a.childNodes[0];this.right=a.childNodes[1];this.knob=a.childNodes[2];
this.input=a.childNodes[3]},postCreate:function(){this.connect(this.domNode,"onclick","onClick");this.connect(this.domNode,d("touch")?"touchstart":"onmousedown","onTouchStart");this._initialValue=this.value},_changeState:function(a,b){var c=a==="on";this.left.style.display="";this.right.style.display="";this.inner.style.left="";b&&e.add(this.domNode,"mblSwitchAnimation");e.remove(this.domNode,c?"mblSwitchOff":"mblSwitchOn");e.add(this.domNode,c?"mblSwitchOn":"mblSwitchOff");var d=this;setTimeout(function(){d.left.style.display=
c?"":"none";d.right.style.display=!c?"":"none";e.remove(d.domNode,"mblSwitchAnimation")},b?300:0)},startup:function(){this._swClass.indexOf("Round")!=-1&&this.createRoundMask(this._swClass,Math.round(this.domNode.offsetHeight/2),this.domNode.offsetWidth)},createRoundMask:function(a,b,c){if(d("webkit")&&a){if(!this._createdMasks)this._createdMasks=[];if(!this._createdMasks[a])this._createdMasks[a]=1,a=g.doc.getCSSCanvasContext("2d",a+"Mask",c,100),a.fillStyle="#000000",a.beginPath(),a.moveTo(b,0),
a.arcTo(0,0,0,2*b,b),a.arcTo(0,2*b,b,2*b,b),a.lineTo(c-b,2*b),a.arcTo(c,2*b,c,b,b),a.arcTo(c,0,c-b,0,b),a.closePath(),a.fill()}},onClick:function(){if(!this._moved)this.value=this.input.value=this.value=="on"?"off":"on",this._changeState(this.value,!0),this.onStateChanged(this.value)},onTouchStart:function(a){this._moved=!1;this.innerStartX=this.inner.offsetLeft;if(!this._conn)this._conn=[],this._conn.push(f.connect(this.inner,d("touch")?"touchmove":"onmousemove",this,"onTouchMove")),this._conn.push(f.connect(this.inner,
d("touch")?"touchend":"onmouseup",this,"onTouchEnd"));this.touchStartX=a.touches?a.touches[0].pageX:a.clientX;this.left.style.display="";this.right.style.display="";j.stop(a)},onTouchMove:function(a){a.preventDefault();if(a.targetTouches){if(a.targetTouches.length!=1)return!1;a=a.targetTouches[0].clientX-this.touchStartX}else a=a.clientX-this.touchStartX;var b=this.innerStartX+a;b<=-(this._width-10)&&(b=-this._width);b>=-10&&(b=0);this.inner.style.left=b+"px";if(Math.abs(a)>10)this._moved=!0},onTouchEnd:function(){h.forEach(this._conn,
f.disconnect);this._conn=null;if(this.innerStartX==this.inner.offsetLeft){if(d("touch")){var a=g.doc.createEvent("MouseEvents");a.initEvent("click",!0,!0);this.inner.dispatchEvent(a)}}else if(a=this.inner.offsetLeft<-(this._width/2)?"off":"on",this._changeState(a,!0),a!=this.value)this.value=this.input.value=a,this.onStateChanged(a)},onStateChanged:function(){},_setValueAttr:function(a){this._changeState(a,!1);if(this.value!=a)this.onStateChanged(a);this.value=this.input.value=a},_setLeftLabelAttr:function(a){this.leftLabel=
a;this.left.firstChild.innerHTML=this._cv?this._cv(a):a},_setRightLabelAttr:function(a){this.rightLabel=a;this.right.firstChild.innerHTML=this._cv?this._cv(a):a},reset:function(){this.set("value",this._initialValue)}})});