//>>built
define("dojox/mobile/Heading",["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dijit/registry","dijit/_Contained","dijit/_Container","dijit/_WidgetBase","./View"],function(h,l,m,i,n,g,f,j,o,p,q,r,s){var k=i.getObject("dojox.mobile",!0);return m("dojox.mobile.Heading",[r,q,p],{back:"",href:"",moveTo:"",transition:"slide",label:"",iconBase:"",backProp:{className:"mblArrowButton"},tag:"H1",buildRendering:function(){this.domNode=
this.containerNode=this.srcNodeRef||n.doc.createElement(this.tag);this.domNode.className="mblHeading";this.label||h.forEach(this.domNode.childNodes,function(a){if(a.nodeType==3){var b=i.trim(a.nodeValue);if(b)this.label=b,this.labelNode=f.create("SPAN",{innerHTML:b},a,"replace")}},this);if(!this.labelNode)this.labelNode=f.create("SPAN",null,this.domNode);this.labelNode.className="mblHeadingSpanTitle";this.labelDivNode=f.create("DIV",{className:"mblHeadingDivTitle",innerHTML:this.labelNode.innerHTML},
this.domNode)},startup:function(){if(!this._started){var a=this.getParent&&this.getParent();if(!a||!a.resize){var b=this;setTimeout(function(){b.resize()},0)}this.inherited(arguments)}},resize:function(){if(this._btn)this._btn.style.width=this._body.offsetWidth+this._head.offsetWidth+"px";if(this.labelNode){for(var a,b,c=this.containerNode.childNodes,d=c.length-1;d>=0;d--){var e=c[d];if(e.nodeType===1&&(!b&&g.contains(e,"mblToolBarButton")&&j.get(e,"float")==="right"&&(b=e),!a&&(g.contains(e,"mblToolBarButton")&&
j.get(e,"float")==="left"||e===this._btn)))a=e}if(!this.labelNodeLen&&this.label)this.labelNode.style.display="inline",this.labelNodeLen=this.labelNode.offsetWidth,this.labelNode.style.display="";c=this.domNode.offsetWidth;g[c-Math.max(b?c-b.offsetLeft+5:0,a?a.offsetLeft+a.offsetWidth+5:0)*2>(this.labelNodeLen||0)?"add":"remove"](this.domNode,"mblHeadingCenterTitle")}h.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},_setBackAttr:function(a){if(a){if(!this._btn){var b=f.create("DIV",
this.backProp,this.domNode,"first"),c=f.create("DIV",{className:"mblArrowButtonHead"},b),d=f.create("DIV",{className:"mblArrowButtonBody mblArrowButtonText"},b);this._body=d;this._head=c;this.backBtnNode=this._btn=b;this.connect(d,"onclick","onClick")}this.back=a;this._body.innerHTML=this._cv?this._cv(this.back):this.back}else f.destroy(this._btn),this._btn=null,this.back="";this.resize()},_setLabelAttr:function(a){this.label=a;this.labelNode.innerHTML=this.labelDivNode.innerHTML=this._cv?this._cv(a):
a},findCurrentView:function(){for(var a=this;;){a=a.getParent();if(!a)return null;if(a instanceof s)break}return a},onClick:function(a){var b=this.domNode;g.add(b,"mblArrowButtonSelected");setTimeout(function(){g.remove(b,"mblArrowButtonSelected")},1E3);if(this.back&&!this.moveTo&&!this.href&&history)history.back();else{var c=this.findCurrentView();if(c)c.clickedPosX=a.clientX,c.clickedPosY=a.clientY;this.goTo(this.moveTo,this.href)}},goTo:function(a,b){var c=this.findCurrentView();if(c)if(b)c.performTransition(null,
-1,this.transition,this,function(){location.href=b});else if(k.app&&k.app.STAGE_CONTROLLER_ACTIVE)l.publish("/dojox/mobile/app/goback");else{var d=o.byId(c.convertToId(a));if(d)for(d=d.getParent();c;){var e=c.getParent();if(d===e)break;c=e}c&&c.performTransition(a,-1,this.transition)}}})});