//>>built
define("dojox/editor/plugins/PrettyPrint",["dojo","dijit","dojox","dijit/_editor/_Plugin","dojo/_base/connect","dojo/_base/declare","dojox/html/format"],function(d,e,c){d.declare("dojox.editor.plugins.PrettyPrint",e._editor._Plugin,{indentBy:-1,lineLength:-1,useDefaultCommand:!1,entityMap:null,_initButton:function(){delete this.command},setToolbar:function(){},setEditor:function(){this.inherited(arguments);var a=this;this.editor.onLoadDeferred.addCallback(function(){a.editor._prettyprint_getValue=
a.editor.getValue;a.editor.getValue=function(){var b=a.editor._prettyprint_getValue(arguments);return c.html.format.prettyPrint(b,a.indentBy,a.lineLength,a.entityMap,a.xhtml)};a.editor._prettyprint_endEditing=a.editor._endEditing;a.editor._prettyprint_onBlur=a.editor._onBlur;a.editor._endEditing=function(){var b=a.editor._prettyprint_getValue(!0);a.editor._undoedSteps=[];a.editor._steps.push({text:b,bookmark:a.editor._getBookmark()})};a.editor._onBlur=function(){this.inherited("_onBlur",arguments);
var b=a.editor._prettyprint_getValue(!0);if(b!=a.editor.savedContent)a.editor.onChange(b),a.editor.savedContent=b}})}});d.subscribe(e._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin&&a.args.name.toLowerCase()==="prettyprint")a.plugin=new c.editor.plugins.PrettyPrint({indentBy:"indentBy"in a.args?a.args.indentBy:-1,lineLength:"lineLength"in a.args?a.args.lineLength:-1,entityMap:"entityMap"in a.args?a.args.entityMap:c.html.entities.html.concat([["\u00a2","cent"],["\u00a3","pound"],["\u20ac",
"euro"],["\u00a5","yen"],["\u00a9","copy"],["\u00a7","sect"],["\u2026","hellip"],["\u00ae","reg"]]),xhtml:"xhtml"in a.args?a.args.xhtml:!1})})});