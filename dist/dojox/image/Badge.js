//>>built
define("dojox/image/Badge",["dojo","dijit","dojox/main","dijit/_Widget","dijit/_TemplatedMixin","dojo/fx/easing"],function(c,g,j){c.experimental("dojox.image.Badge");c.getObject("image",!0,j);c.declare("dojox.image.Badge",[g._Widget,g._TemplatedMixin],{baseClass:"dojoxBadge",templateString:'<div class="dojoxBadge" dojoAttachPoint="containerNode"></div>',children:"div.dojoxBadgeImage",rows:4,cols:5,cellSize:50,cellMargin:1,delay:2E3,threads:1,easing:"dojo.fx.easing.backOut",startup:function(){if(!this._started){if(c.isString(this.easing))this.easing=
c.getObject(this.easing);this.inherited(arguments);this._init()}},_init:function(){var a=0,b=this.cellSize;c.style(this.domNode,{width:b*this.cols+"px",height:b*this.rows+"px"});this._nl=c.query(this.children,this.containerNode).forEach(function(d,h){var e=h%this.cols,f=this.cellMargin*2;c.style(d,{top:a*b+"px",left:e*b+"px",width:b-f+"px",height:b-f+"px"});e==this.cols-1&&a++;c.addClass(d,this.baseClass+"Image")},this);for(var d=this._nl.length;this.threads--;)setTimeout(c.hitch(this,"_enbiggen",
{target:this._nl[Math.floor(Math.random()*d)]}),this.delay*this.threads)},_getCell:function(a){a=this._nl.indexOf(a);if(a>=0)return{x:a%this.cols,y:Math.floor(a/this.cols),n:this._nl[a],io:a}},_getImage:function(){return"url('')"},_enbiggen:function(a){if(a=this._getCell(a.target||a)){var b=this.cellMargin,d=this.cellSize*2-b*2,d={height:d,width:d};if(a.x==this.cols-1||a.x>0&&Math.round(Math.random()))d.left=this.cellSize*(a.x-b);if(a.y==this.rows-1||a.y>0&&Math.round(Math.random()))d.top=this.cellSize*
(a.y-b);b=this.baseClass;c.addClass(a.n,b+"Top");c.addClass(a.n,b+"Seen");c.animateProperty({node:a.n,properties:d,onEnd:c.hitch(this,"_loadUnder",a,d),easing:this.easing}).play()}},_loadUnder:function(a,b){var d=a.io,i=b.left>=0,h=b.top>=0,e=this.cols,f=d+(i?-1:1);d+=h?-e:e;var g=this.baseClass;c.forEach([f,d,h?i?f-e:d+1:i?d-1:f+e],function(a){(a=this._nl[a])&&c.hasClass(a,g+"Seen")&&c.removeClass(a,g+"Seen")},this);setTimeout(c.hitch(this,"_disenbiggen",a,b),this.delay*1.25)},_disenbiggen:function(a,
b){b.top>=0&&(b.top+=this.cellSize);b.left>=0&&(b.left+=this.cellSize);var d=this.cellSize-this.cellMargin*2;c.animateProperty({node:a.n,properties:c.mixin(b,{width:d,height:d}),onEnd:c.hitch(this,"_cycle",a,b)}).play(5)},_cycle:function(a){var b=this.baseClass;c.removeClass(a.n,b+"Top");a=this._nl.filter(function(a){return!c.hasClass(a,b+"Seen")});setTimeout(c.hitch(this,"_enbiggen",{target:a[Math.floor(Math.random()*a.length)]}),this.delay/2)}});return j.image.Badge});