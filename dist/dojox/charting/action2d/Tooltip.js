//>>built
define("dojox/charting/action2d/Tooltip",["dojo/_base/kernel","dijit/Tooltip","dojo/_base/lang","dojo/_base/html","dojo/_base/declare","./PlotAction","dojox/gfx/matrix","dojox/lang/functional","dojox/lang/functional/scan","dojox/lang/functional/fold"],function(p,g,j,k,l,m,n,e){var f=function(a){var b=a.run&&a.run.data&&a.run.data[a.index];if(b&&typeof b!="number"&&(b.tooltip||b.text))return b.tooltip||b.text;if(a.element=="candlestick")return'<table cellpadding="1" cellspacing="0" border="0" style="font-size:0.9em;"><tr><td>Open:</td><td align="right"><strong>'+
a.data.open+'</strong></td></tr><tr><td>High:</td><td align="right"><strong>'+a.data.high+'</strong></td></tr><tr><td>Low:</td><td align="right"><strong>'+a.data.low+'</strong></td></tr><tr><td>Close:</td><td align="right"><strong>'+a.data.close+"</strong></td></tr>"+(a.data.mid!==void 0?'<tr><td>Mid:</td><td align="right"><strong>'+a.data.mid+"</strong></td></tr>":"")+"</table>";return a.element=="bar"?a.x:a.y},h=Math.PI/4,o=Math.PI/2;return l("dojox.charting.action2d.Tooltip",m,{defaultParams:{text:f},
optionalParams:{},constructor:function(a,b,c){this.text=c&&c.text?c.text:f;this.connect()},process:function(a){if(a.type==="onplotreset"||a.type==="onmouseout")g.hide(this.aroundRect),this.aroundRect=null,a.type==="onplotreset"&&delete this.angles;else if(a.shape&&a.type==="onmouseover"){var b={type:"rect"},c=["after","before"];switch(a.element){case "marker":b.x=a.cx;b.y=a.cy;b.w=b.h=1;break;case "circle":b.x=a.cx-a.cr;b.y=a.cy-a.cr;b.w=b.h=2*a.cr;break;case "column":c=["above","below"];case "bar":b=
j.clone(a.shape.getShape());b.w=b.width;b.h=b.height;break;case "candlestick":b.x=a.x;b.y=a.y;b.w=a.width;b.h=a.height;break;default:if(!this.angles)this.angles=typeof a.run.data[0]=="number"?e.map(e.scanl(a.run.data,"+",0),"* 2 * Math.PI / this",e.foldl(a.run.data,"+",0)):e.map(e.scanl(a.run.data,"a + b.y",0),"* 2 * Math.PI / this",e.foldl(a.run.data,"a + b.y",0));var d=n._degToRad(a.plot.opt.startAngle),d=(this.angles[a.index]+this.angles[a.index+1])/2+d;b.x=a.cx+a.cr*Math.cos(d);b.y=a.cy+a.cr*
Math.sin(d);b.w=b.h=1;d<h||(d<o+h?c=["below","above"]:d<Math.PI+h?c=["before","after"]:d<2*Math.PI-h&&(c=["above","below"]))}d=this.chart.getCoords();b.x+=d.x;b.y+=d.y;b.x=Math.round(b.x);b.y=Math.round(b.y);b.w=Math.ceil(b.w);b.h=Math.ceil(b.h);this.aroundRect=b;a=this.text(a);if(this.chart.getTextDir)var f=k.style(this.chart.node,"direction")=="rtl",i=this.chart.getTextDir(a)=="rtl";a&&(i&&!f?g.show("<span dir = 'rtl'>"+a+"</span>",this.aroundRect,c):!i&&f?g.show("<span dir = 'ltr'>"+a+"</span>",
this.aroundRect,c):g.show(a,this.aroundRect,c))}}})});