//>>built
define("dojox/charting/plot2d/Grid",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/array","../Element","./common","dojox/lang/utils","dojox/gfx/fx"],function(j,m,n,h,o,p,q,k){return m("dojox.charting.plot2d.Grid",o,{defaultParams:{hAxis:"x",vAxis:"y",hMajorLines:!0,hMinorLines:!1,vMajorLines:!0,vMinorLines:!1,hStripes:"none",vStripes:"none",animate:null,enableCache:!1},optionalParams:{},constructor:function(c,a){this.opt=j.clone(this.defaultParams);q.updateWithObject(this.opt,
a);this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.dirty=!0;this.animate=this.opt.animate;this.zoom=null;this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};if(this.opt.enableCache)this._lineFreePool=[],this._lineUsePool=[]},clear:function(){this._vAxis=this._hAxis=null;this.dirty=!0;return this},setAxis:function(c){c&&(this[c.vertical?"_vAxis":"_hAxis"]=c);return this},addSeries:function(){return this},getSeriesStats:function(){return j.delegate(p.defaultStats)},initializeScalers:function(){return this},
isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty},performZoom:function(c,a){var d=this._vAxis.scale||1,f=this._hAxis.scale||1,i=c.height-a.b,g=this._hAxis.getScaler().bounds,g=(g.from-g.lower)*g.scale,e=this._vAxis.getScaler().bounds,e=(e.from-e.lower)*e.scale,h=d/this.lastWindow.vscale,l=f/this.lastWindow.hscale,i=k.animateTransform(j.delegate({shape:this.group,duration:1200,transform:[{name:"translate",start:[0,0],end:[a.l*(1-l),i*(1-h)]},{name:"scale",
start:[1,1],end:[l,h]},{name:"original"},{name:"translate",start:[0,0],end:[(this.lastWindow.xoffset-g)/(this.lastWindow.hscale==1?f:this.lastWindow.hscale),(e-this.lastWindow.yoffset)/(this.lastWindow.vscale==1?d:this.lastWindow.vscale)]}]},this.zoom));j.mixin(this.lastWindow,{vscale:d,hscale:f,xoffset:g,yoffset:e});this.zoomQueue.push(i);n.connect(i,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();this.zoomQueue.length>0&&this.zoomQueue[0].play()});this.zoomQueue.length==1&&this.zoomQueue[0].play();
return this},getRequiredColors:function(){return 0},cleanGroup:function(){this.inherited(arguments);if(this.opt.enableCache)this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[]},createLine:function(c,a){var d;this.opt.enableCache&&this._lineFreePool.length>0?(d=this._lineFreePool.pop(),d.setShape(a),c.add(d)):d=c.createLine(a);this.opt.enableCache&&this._lineUsePool.push(d);return d},render:function(c,a){if(this.zoom)return this.performZoom(c,a);this.dirty=this.isDirty();
if(!this.dirty)return this;this.cleanGroup();var d=this.group,f=this.chart.theme.axis;try{var i=this._vAxis.getScaler(),g=i.scaler.getTransformerFromModel(i),e=this._vAxis.getTicks();e!=null&&(this.opt.hMinorLines&&h.forEach(e.minor,function(b){b=c.height-a.b-g(b.value);b=this.createLine(d,{x1:a.l,y1:b,x2:c.width-a.r,y2:b}).setStroke(f.minorTick);this.animate&&this._animateGrid(b,"h",a.l,a.r+a.l-c.width)},this),this.opt.hMajorLines&&h.forEach(e.major,function(b){b=c.height-a.b-g(b.value);b=this.createLine(d,
{x1:a.l,y1:b,x2:c.width-a.r,y2:b}).setStroke(f.majorTick);this.animate&&this._animateGrid(b,"h",a.l,a.r+a.l-c.width)},this))}catch(j){}try{var l=this._hAxis.getScaler(),k=l.scaler.getTransformerFromModel(l),e=this._hAxis.getTicks();this!=null&&(e&&this.opt.vMinorLines&&h.forEach(e.minor,function(b){b=a.l+k(b.value);b=this.createLine(d,{x1:b,y1:a.t,x2:b,y2:c.height-a.b}).setStroke(f.minorTick);this.animate&&this._animateGrid(b,"v",c.height-a.b,c.height-a.b-a.t)},this),e&&this.opt.vMajorLines&&h.forEach(e.major,
function(b){b=a.l+k(b.value);b=this.createLine(d,{x1:b,y1:a.t,x2:b,y2:c.height-a.b}).setStroke(f.majorTick);this.animate&&this._animateGrid(b,"v",c.height-a.b,c.height-a.b-a.t)},this))}catch(m){}this.dirty=!1;return this},_animateGrid:function(c,a,d,f){k.animateTransform(j.delegate({shape:c,duration:1200,transform:[{name:"translate",start:a=="h"?[d,0]:[0,d],end:[0,0]},{name:"scale",start:a=="h"?[1/f,1]:[1,1/f],end:[1,1]},{name:"original"}]},this.animate)).play()}})});