//>>built
define("dojox/charting/plot2d/ClusteredBars",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Bars","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils"],function(B,x,k,l,y,z,m){var A=m.lambda("item.purgeGroup()");return k("dojox.charting.plot2d.ClusteredBars",l,{render:function(n,g){var C;if(this.zoom&&!this.isDataDirty())return this.performZoom(n,g);this.resetEvents();if(this.dirty=this.isDirty()){x.forEach(this.series,A);this._eventSeries={};this.cleanGroup();
var o=this.group;z.forEachRev(this.series,function(a){a.cleanGroup(o)})}var i=this.chart.theme,d,q,r,s=this._hScaler.scaler.getTransformerFromModel(this._hScaler),k=this._vScaler.scaler.getTransformerFromModel(this._vScaler),t=Math.max(0,this._hScaler.bounds.lower),p=s(t),l=this.events();d=y.calculateBarSize(this._vScaler.bounds.scale,this.opt,this.series.length);q=d.gap;C=r=d.size,d=C;for(var j=this.series.length-1;j>=0;--j){var b=this.series[j],m=r*(this.series.length-j-1);if(!this.dirty&&!b.dirty)i.skip(),
this._reconnectEvents(b.name);else{b.cleanGroup();for(var u=i.next("bar",[this.opt,b]),o=b.group,v=Array(b.data.length),c=0;c<b.data.length;++c){var a=b.data[c];if(a!==null){var e=typeof a=="number"?a:a.y,h=s(e),w=h-p,f=Math.abs(w),a=typeof a!="number"?i.addMixin(u,"bar",a,!0):i.post(u,"bar");if(f>=0&&d>=1)h={x:g.l+(e<t?h:p),y:n.height-g.b-k(c+1.5)+q+m,width:f,height:d},f=this._plotFill(a.series.fill,n,g),f=this._shapeFill(f,h),a=o.createRect(h).setFill(f).setStroke(a.series.stroke),b.dyn.fill=a.getFill(),
b.dyn.stroke=a.getStroke(),l&&(e={element:"bar",index:c,run:b,shape:a,x:e,y:c+1.5},this._connectEvents(e),v[c]=e),this.animate&&this._animateBar(a,g.l+p,-w)}}this._eventSeries[b.name]=v;b.dirty=!1}}this.dirty=!1;return this}})});