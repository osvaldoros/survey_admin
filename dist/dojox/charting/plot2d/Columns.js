//>>built
define("dojox/charting/plot2d/Columns",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(j,z,m,n,u,A,o,l,p){var B=o.lambda("item.purgeGroup()");return m("dojox.charting.plot2d.Columns",n,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,animate:null,enableCache:!1},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(b,
c){this.opt=j.clone(this.defaultParams);l.updateWithObject(this.opt,c);l.updateWithPattern(this.opt,c,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate},getSeriesStats:function(){var b=u.collectSimpleStats(this.series);b.hmin-=0.5;b.hmax+=0.5;return b},createRect:function(b,c,e){var f;this.opt.enableCache&&b._rectFreePool.length>0?(f=b._rectFreePool.pop(),f.setShape(e),c.add(f)):f=c.createRect(e);this.opt.enableCache&&b._rectUsePool.push(f);
return f},render:function(b,c){if(this.zoom&&!this.isDataDirty())return this.performZoom(b,c);var e=this.getSeriesStats();this.resetEvents();if(this.dirty=this.isDirty()){z.forEach(this.series,B);this._eventSeries={};this.cleanGroup();var f=this.group;A.forEachRev(this.series,function(a){a.cleanGroup(f)})}var e=this.chart.theme,h,j,l=this._hScaler.scaler.getTransformerFromModel(this._hScaler),v=this._vScaler.scaler.getTransformerFromModel(this._vScaler),w=Math.max(0,this._vScaler.bounds.lower),q=
v(w),m=Math.max(0,Math.floor(this._hScaler.bounds.from-1)),n=Math.ceil(this._hScaler.bounds.to),o=this.events();h=u.calculateBarSize(this._hScaler.bounds.scale,this.opt);j=h.gap;h=h.size;for(var r=this.series.length-1;r>=0;--r){var a=this.series[r];if(!this.dirty&&!a.dirty)e.skip(),this._reconnectEvents(a.name);else{a.cleanGroup();if(this.opt.enableCache)a._rectFreePool=(a._rectFreePool?a._rectFreePool:[]).concat(a._rectUsePool?a._rectUsePool:[]),a._rectUsePool=[];for(var x=e.next("column",[this.opt,
a]),f=a.group,y=Array(a.data.length),p=Math.min(a.data.length,n),g=m;g<p;++g){var d=a.data[g];if(d!==null){var i=typeof d=="number"?d:d.y,k=v(i),s=Math.abs(k-q),d=typeof d!="number"?e.addMixin(x,"column",d,!0):e.post(x,"column");if(h>=1&&s>=0){var k={x:c.l+l(g+0.5)+j,y:b.height-c.b-(i>w?k:q),width:h,height:s},t=this._plotFill(d.series.fill,b,c),t=this._shapeFill(t,k),d=this.createRect(a,f,k).setFill(t).setStroke(d.series.stroke);a.dyn.fill=d.getFill();a.dyn.stroke=d.getStroke();o&&(i={element:"column",
index:g,run:a,shape:d,x:g+0.5,y:i},this._connectEvents(i),y[g]=i);this.animate&&this._animateColumn(d,b.height-c.b-q,s)}}}this._eventSeries[a.name]=y;a.dirty=!1}}this.dirty=!1;return this},_animateColumn:function(b,c,e){p.animateTransform(j.delegate({shape:b,duration:1200,transform:[{name:"translate",start:[0,c-c/e],end:[0,0]},{name:"scale",start:[1,1/e],end:[1,1]},{name:"original"}]},this.animate)).play()}})});