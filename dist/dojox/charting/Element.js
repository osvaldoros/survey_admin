//>>built
define("dojox/charting/Element",["dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/utils","dojox/gfx/shape"],function(m,h,i,j,e,k,l){return j("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:!0,constructor:function(a){this.chart=a;this.group=null;this.htmlElements=[];this.dirty=!0;this.trailingSymbol="...";this._events=[]},createGroup:function(a){if(!a)a=this.chart.surface;if(!this.group)this.group=a.createGroup();return this},
purgeGroup:function(){this.destroyHtmlElements();if(this.group)k.forEach(this.group,function(a){l.dispose(a)}),this.group.clear(),this.group.removeShape(),this.group=null;this.dirty=!0;if(this._events.length)h.forEach(this._events,function(a){a.shape.disconnect(a.handle)}),this._events=[];return this},cleanGroup:function(a){this.destroyHtmlElements();if(!a)a=this.chart.surface;this.group?this.group.clear():this.group=a.createGroup();this.dirty=!0;return this},destroyHtmlElements:function(){if(this.htmlElements.length)h.forEach(this.htmlElements,
i.destroy),this.htmlElements=[]},destroy:function(){this.purgeGroup()},getTextWidth:function(a,d){return e._base._getTextBox(a,{font:d}).w||0},getTextWithLimitLength:function(a,d,b,c){if(!a||a.length<=0)return{text:"",truncated:c||!1};if(!b||b<=0)return{text:a,truncated:c||!1};var f=a.substring(0,1)+this.trailingSymbol,e=this.getTextWidth(f,d);if(b<=e)return{text:f,truncated:!0};if(this.getTextWidth(a,d)<=b)return{text:a,truncated:c||!1};else{c=0;for(f=a.length;c<f;){if(f-c<=2){for(;this.getTextWidth(a.substring(0,
c)+this.trailingSymbol,d)>b;)c-=1;return{text:a.substring(0,c)+this.trailingSymbol,truncated:!0}}e=c+Math.round((f-c)*0.618);this.getTextWidth(a.substring(0,e),d)<b?c=e:f=e}}},getTextWithLimitCharCount:function(a,d,b,c){if(!a||a.length<=0)return{text:"",truncated:c||!1};if(!b||b<=0||a.length<=b)return{text:a,truncated:c||!1};return{text:a.substring(0,b)+this.trailingSymbol,truncated:!0}},_plotFill:function(a,d,b){if(!a||!a.type||!a.space)return a;var c=a.space;switch(a.type){case "linear":if(c===
"plot"||c==="shapeX"||c==="shapeY"){a=e.makeParameters(e.defaultLinearGradient,a);a.space=c;if(c==="plot"||c==="shapeX"){var f=d.height-b.t-b.b;a.y1=b.t+f*a.y1/100;a.y2=b.t+f*a.y2/100}if(c==="plot"||c==="shapeY")f=d.width-b.l-b.r,a.x1=b.l+f*a.x1/100,a.x2=b.l+f*a.x2/100}break;case "radial":if(c==="plot")a=e.makeParameters(e.defaultRadialGradient,a),a.space=c,c=d.width-b.l-b.r,d=d.height-b.t-b.b,a.cx=b.l+c*a.cx/100,a.cy=b.t+d*a.cy/100,a.r=a.r*Math.sqrt(c*c+d*d)/200;break;case "pattern":if(c==="plot"||
c==="shapeX"||c==="shapeY"){a=e.makeParameters(e.defaultPattern,a);a.space=c;if(c==="plot"||c==="shapeX")f=d.height-b.t-b.b,a.y=b.t+f*a.y/100,a.height=f*a.height/100;if(c==="plot"||c==="shapeY")f=d.width-b.l-b.r,a.x=b.l+f*a.x/100,a.width=f*a.width/100}}return a},_shapeFill:function(a,d){if(!a||!a.space)return a;var b=a.space;switch(a.type){case "linear":if(b==="shape"||b==="shapeX"||b==="shapeY"){a=e.makeParameters(e.defaultLinearGradient,a);a.space=b;if(b==="shape"||b==="shapeX"){var c=d.width;a.x1=
d.x+c*a.x1/100;a.x2=d.x+c*a.x2/100}if(b==="shape"||b==="shapeY")c=d.height,a.y1=d.y+c*a.y1/100,a.y2=d.y+c*a.y2/100}break;case "radial":if(b==="shape")a=e.makeParameters(e.defaultRadialGradient,a),a.space=b,a.cx=d.x+d.width/2,a.cy=d.y+d.height/2,a.r=a.r*d.width/200;break;case "pattern":if(b==="shape"||b==="shapeX"||b==="shapeY"){a=e.makeParameters(e.defaultPattern,a);a.space=b;if(b==="shape"||b==="shapeX")c=d.width,a.x=d.x+c*a.x/100,a.width=c*a.width/100;if(b==="shape"||b==="shapeY")c=d.height,a.y=
d.y+c*a.y/100,a.height=c*a.height/100}}return a},_pseudoRadialFill:function(a,d,b,c,f){if(!a||a.type!=="radial"||a.space!=="shape")return a;var g=a.space,a=e.makeParameters(e.defaultRadialGradient,a);a.space=g;if(arguments.length<4)return a.cx=d.x,a.cy=d.y,a.r=a.r*b/100,a;g=arguments.length<5?c:(f+c)/2;return{type:"linear",x1:d.x,y1:d.y,x2:d.x+a.r*b*Math.cos(g)/100,y2:d.y+a.r*b*Math.sin(g)/100,colors:a.colors}}})});