//>>built
define("dojox/charting/BidiSupport",["dojo/_base/lang","dojo/_base/html","dojo/_base/array","dojo/_base/sniff","dojo/dom","dojo/dom-construct","dojox/gfx","dojox/gfx/_gfxBidiSupport","./Chart","./axis2d/common","dojox/string/BidiEngine","dojox/lang/functional"],function(k,d,g,l,m,n,h,i,o,j,p,q){var r=new p;k.extend(o,{textDir:"",getTextDir:function(b){(b=this.textDir=="auto"?r.checkContextual(b):this.textDir)||(b=d.style(this.node,"direction"));return b},postscript:function(b,a){var c=a?a.textDir?
/^(ltr|rtl|auto)$/.test(a.textDir)?a.textDir:null:"":"";this.textDir=c=c?c:d.style(this.node,"direction");this.surface.textDir=c;this.htmlElementsRegistry=[];this.truncatedLabelsRegistry=[]},setTextDir:function(b){if(b==this.textDir)return this;if((/^(ltr|rtl|auto)$/.test(b)?b:null)!=null){this.textDir=b;this.surface.setTextDir(b);this.truncatedLabelsRegistry&&b=="auto"&&g.forEach(this.truncatedLabelsRegistry,function(a){var b=this.getTextDir(a.label);a.element.textDir!=b&&a.element.setShape({textDir:b})},
this);var a=q.keys(this.axes);if(a.length>0){if(g.forEach(a,function(a){a=this.axes[a];if(a.htmlElements[0])a.dirty=!0,a.render(this.dim,this.offsets)},this),this.title){var a=h.renderer=="canvas"||!l("ie")&&!l("opera")?"html":"gfx",c=h.normalizedLength(h.splitFontString(this.titleFont).size);n.destroy(this.chartTitle);this.chartTitle=null;this.chartTitle=j.createText[a](this,this.surface,this.dim.width/2,this.titlePos=="top"?c+this.margins.t:this.dim.height-this.margins.b,"middle",this.title,this.titleFont,
this.titleFontColor)}}else g.forEach(this.htmlElementsRegistry,function(a){var c=b=="auto"?this.getTextDir(a[4]):b;a[0].children[0]&&a[0].children[0].dir!=c&&(m.destroy(a[0].children[0]),a[0].children[0]=j.createText.html(this,this.surface,a[1],a[2],a[3],a[4],a[5],a[6]).children[0])},this)}},truncateBidi:function(b,a,c){c=="gfx"&&(this.truncatedLabelsRegistry.push({element:b,label:a}),this.textDir=="auto"&&b.setShape({textDir:this.getTextDir(a)}));if(c=="html"&&this.textDir=="auto")b.children[0].dir=
this.getTextDir(a)}});i=function(b,a,c,e,f){if(c){var d=b.prototype[a];b.prototype[a]=function(){var a;e&&(a=e.apply(this,arguments));a=d.apply(this,a);f&&(a=f.call(this,a,arguments));return a}}else d=k.clone(b[a]),b[a]=function(){e&&e.apply(this,arguments);var a=d.apply(this,arguments);f&&f(a,arguments);return a}};dojox.charting.axis2d&&dojox.charting.axis2d.Default&&i(dojox.charting.axis2d.Default,"labelTooltip",!0,function(b,a,c){var e=d.style(a.node,"direction")=="rtl",f=a.getTextDir(c)=="rtl";
f&&!e&&(c="<span dir='rtl'>"+c+"</span>");!f&&e&&(c="<span dir='ltr'>"+c+"</span>");return arguments},null);i(j.createText,"html",!1,null,function(b,a){a[0].htmlElementsRegistry.push([b,a[2],a[3],a[4],a[5],a[6],a[7]])})});