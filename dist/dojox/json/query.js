//>>built
define("dojox/json/query",["dojo/_base/kernel","dojox","dojo/_base/array"],function(k,f){k.getObject("json",!0,f);f.json._slice=function(b,c,d,g){for(var a=b.length,h=[],d=d||a,c=c<0?Math.max(0,c+a):Math.min(a,c),d=d<0?Math.max(0,d+a):Math.min(a,d);c<d;c+=g)h.push(b[c]);return h};f.json._find=function(b,c){function d(a){c&&(c===!0&&!(a instanceof Array)?g.push(a):a[c]&&g.push(a[c]));for(var b in a){var j=a[b];c?j&&typeof j=="object"&&d(j):g.push(j)}}var g=[];if(c instanceof Array){if(c.length==1)return b[c[0]];
for(var a=0;a<c.length;a++)g.push(b[c[a]])}else d(b);return g};f.json._distinctFilter=function(b,c){for(var d=[],g={},a=0,h=b.length;a<h;++a){var e=b[a];if(c(e,a,b))if(typeof e=="object"&&e){if(!e.__included)e.__included=!0,d.push(e)}else g[e+typeof e]||(g[e+typeof e]=!0,d.push(e))}a=0;for(h=d.length;a<h;++a)d[a]&&delete d[a].__included;return d};return f.json.query=function(b,c){function d(i){e=i+"("+e}function g(i,a,b,c,d,e,g,f){return h[f].match(/[\*\?]/)||g=="~"?"/^"+h[f].substring(1,h[f].length-
1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,"[\\w\\W]$1")+(g=="~"?"$/i":"$/")+".test("+a+")":i}var a=0,h=[],b=b.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(i){a+=i=="["?1:i=="]"?-1:0;return i=="]"&&a>0?"`]":i.charAt(0)=='"'||i.charAt(0)=="'"?"`"+(h.push(i)-1):i}),e="";b.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw Error("Unsafe function call");});for(var b=b.replace(/([^<>=]=)([^=])/g,"$1=$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,
function(a){return a.charAt(0)=="."?a:a=="@"?"$obj":(a.match(/:|^(\$|Math|true|false|null)$/)?"":"$obj.")+a}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(a,b,c){if(b=a.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/))return c="",a.match(/^\./)&&(d("dojox.json._find"),c=",true)"),d(b[1].match(/\=/)?"dojo.map":b[1].match(/\^/)?"dojox.json._distinctFilter":"dojo.filter"),c+",function($obj){return "+b[2]+"})";if(b=a.match(/^\[\s*([\/\\].*)\]/))return".concat().sort(function(a,b){"+
b[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(a,b,c){return"var av= "+c.replace(/\$obj/,"a")+",bv= "+c.replace(/\$obj/,"b")+";if(av>bv||bv==null){return "+(b=="/"?1:-1)+";}\nif(bv>av||av==null){return "+(b=="/"?-1:1)+";}\n"})+"return 0;})";if(b=a.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/))return d("dojox.json._slice"),","+(b[1]||0)+","+(b[2]||0)+","+(b[3]||1)+")";if(a.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/))return d("dojox.json._find"),(a.charAt(1)=="."?",'"+c+"'":a.match(/,/)?","+a:"")+
")";return a}).replace(/(\$obj\s*((\.\s*[\w_$]+\s*)|(\[\s*`([0-9]+)\s*`\]))*)(==|~)\s*`([0-9]+)/g,g).replace(/`([0-9]+)\s*(==|~)\s*(\$obj\s*((\.\s*[\w_$]+)|(\[\s*`([0-9]+)\s*`\]))*)/g,function(a,b,c,d,e,f,h,j){return g(a,d,e,f,h,j,c,b)}),b=e+(b.charAt(0)=="$"?"":"$")+b.replace(/`([0-9]+|\])/g,function(a,b){return b=="]"?"]":h[b]}),j=eval("1&&function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj=$;return "+b+"}"),f=0;f<arguments.length-1;f++)arguments[f]=arguments[f+1];return c?j.apply(this,arguments):j}});