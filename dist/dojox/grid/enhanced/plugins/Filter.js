//>>built
define("dojox/grid/enhanced/plugins/Filter",["dojo/_base/declare","dojo/_base/lang","dojo/i18n","../_Plugin","./Dialog","./filter/FilterLayer","./filter/FilterBar","./filter/FilterDefDialog","./filter/FilterStatusTip","./filter/ClearFilterConfirm","../../EnhancedGrid","dojo/i18n!../nls/Filter"],function(d,f,g,h,i,e,j,k,l,m,n){d=d("dojox.grid.enhanced.plugins.Filter",h,{name:"filter",constructor:function(b,a){this.grid=b;this.nls=g.getLocalization("dojox.grid.enhanced","Filter");a=this.args=f.isObject(a)?
a:{};if(typeof a.ruleCount!="number"||a.ruleCount<0)a.ruleCount=3;if((this.ruleCountToConfirmClearFilter=a.ruleCountToConfirmClearFilter)===void 0)this.ruleCountToConfirmClearFilter=2;this._wrapStore();var c={plugin:this};this.clearFilterDialog=new i({refNode:this.grid.domNode,title:this.nls.clearFilterDialogTitle,content:new m(c)});this.filterDefDialog=new k(c);this.filterBar=new j(c);this.filterStatusTip=new l(c);b.onFilterDefined=function(){};this.connect(b.layer("filter"),"onFilterDefined",function(){b.onFilterDefined(b.getFilter(),
b.getFilterRelation())})},destroy:function(){this.inherited(arguments);try{this.grid.unwrap("filter"),this.filterBar.destroyRecursive(),this.filterBar=null,this.clearFilterDialog.destroyRecursive(),this.clearFilterDialog=null,this.filterStatusTip.destroy(),this.filterStatusTip=null,this.filterDefDialog.destroy(),this.args=this.nls=this.grid=this.filterDefDialog=null}catch(b){console.warn("Filter.destroy() error:",b)}},_wrapStore:function(){var b=this.grid,a=this.args,a=a.isServerSide?new e.ServerSideFilterLayer(a):
new e.ClientSideFilterLayer({cacheSize:a.filterCacheSize,fetchAll:a.fetchAllOnFirstFilter,getter:this._clientFilterGetter});e.wrap(b,"_storeLayerFetch",a);this.connect(b,"_onDelete",f.hitch(a,"invalidate"))},onSetStore:function(){this.filterDefDialog.clearFilter(!0)},_clientFilterGetter:function(b,a,c){return a.get(c,b)}});n.registerPlugin(d);return d});