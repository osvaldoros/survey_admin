//>>built
define(["dijit","dojo","dojox"],function(h,a,e){a.provide("dojox.drawing.annotations.Angle");e.drawing.annotations.Angle=e.drawing.util.oo.declare(function(a){this.stencil=a.stencil;this.util=a.stencil.util;this.mouse=a.stencil.mouse;this.stencil.connectMult([["onDrag",this,"showAngle"],["onUp",this,"hideAngle"],["onTransformBegin",this,"showAngle"],["onTransform",this,"showAngle"],["onTransformEnd",this,"hideAngle"]])},{type:"dojox.drawing.tools.custom",angle:0,showAngle:function(){if(this.stencil.selected||
!this.stencil.created)if(this.stencil.getRadius()<this.stencil.minimumSize)this.hideAngle();else{var c=this.getAngleNode(),b=this.stencil.pointsToData(),b=e.drawing.util.positioning.angle({x:b.x1,y:b.y1},{x:b.x2,y:b.y2}),f=this.mouse.scrollOffset(),d=this.stencil.getTransform(),g=d.dx/this.mouse.zoom,d=d.dy/this.mouse.zoom;b.x/=this.mouse.zoom;b.y/=this.mouse.zoom;a.style(c,{left:this.stencil._offX+b.x-f.left+g+"px",top:this.stencil._offY+b.y-f.top+d+"px",align:b.align});b=this.stencil.getAngle();
c.innerHTML=this.stencil.style.zAxis&&this.stencil.shortType=="vector"?this.stencil.data.cosphi>0?"out of":"into":this.stencil.shortType=="line"?this.stencil.style.zAxis?"out of":Math.ceil(b%180):Math.ceil(b)}},getAngleNode:function(){if(!this._angleNode)this._angleNode=a.create("span",null,a.body()),a.addClass(this._angleNode,"textAnnotation"),a.style(this._angleNode,"opacity",1);return this._angleNode},hideAngle:function(){if(this._angleNode&&a.style(this._angleNode,"opacity")>0.9)a.fadeOut({node:this._angleNode,
duration:500,onEnd:function(c){a.destroy(c)}}).play(),this._angleNode=null}})});