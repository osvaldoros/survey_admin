//>>built
define(["dijit","dojo","dojox","dojo/require!dojox/wire/_base,dojox/wire/ml/util"],function(i,d){d.provide("dojox.wire.ml.RestHandler");d.require("dojox.wire._base");d.require("dojox.wire.ml.util");d.declare("dojox.wire.ml.RestHandler",null,{contentType:"text/plain",handleAs:"text",bind:function(a,b,e,c){var a=a.toUpperCase(),h=this,c={url:this._getUrl(a,b,c),contentType:this.contentType,handleAs:this.handleAs,headers:this.headers,preventCache:this.preventCache},f=null;a=="POST"?(c.postData=this._getContent(a,
b),f=d.rawXhrPost(c)):a=="PUT"?(c.putData=this._getContent(a,b),f=d.rawXhrPut(c)):f=a=="DELETE"?d.xhrDelete(c):d.xhrGet(c);f.addCallbacks(function(a){e.callback(h._getResult(a))},function(a){e.errback(a)})},_getUrl:function(a,b,e){var c;a=="GET"||a=="DELETE"?b.length>0&&(c=b[0]):b.length>1&&(c=b[1]);if(c){var a="",d;for(d in c)if(b=c[d]){var b=encodeURIComponent(b),f="{"+d+"}",g=e.indexOf(f);g>=0?e=e.substring(0,g)+b+e.substring(g+f.length):(a&&(a+="&"),a+=d+"="+b)}a&&(e+="?"+a)}return e},_getContent:function(a,
b){return a=="POST"||a=="PUT"?b?b[0]:null:null},_getResult:function(a){return a}})});