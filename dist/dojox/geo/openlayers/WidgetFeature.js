//>>built
define("dojox/geo/openlayers/WidgetFeature",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/html","dojo/_base/lang","dojox/geo/openlayers/Feature"],function(h,i,c,g,j){return i("dojox.geo.openlayers.WidgetFeature",j,{_widget:null,_bbox:null,constructor:function(a){this._params=a},setParameters:function(a){this._params=a},getParameters:function(){return this._params},_getWidget:function(){var a=this._params;if(this._widget==null&&a!=null){var b=null;if(typeof a.createWidget=="function")b=a.createWidget.call(this);
else if(a.dojoType)h.require(a.dojoType),b=new (g.getObject(a.dojoType))(a);else if(a.dijitId)b=dijit.byId(a.dijitId);else if(a.widget)b=a.widget;if(b!=null)this._widget=b,typeof b.startup=="function"&&b.startup(),a=b.domNode,a!=null&&c.style(a,{position:"absolute"});this._widget=b}return this._widget},_getWidgetWidth:function(){var a=this._params;if(a.width)return a.width;if(a=this._getWidget())return c.style(a.domNode,"width");return 10},_getWidgetHeight:function(){var a=this._params;if(a.height)return a.height;
if(a=this._getWidget())return c.style(a.domNode,"height");return 10},render:function(){var a=this.getLayer(),b=this._getWidget();if(b!=null){var d=this._params,c=d.longitude,d=d.latitude,f=this.getCoordinateSystem(),e=this._getLocalXY(a.getDojoMap().transformXY(c,d,f)),c=this._getWidgetWidth(),d=this._getWidgetHeight(),f=e[0]-c/2,e=e[1]-d/2,b=b.domNode,a=a.olLayer.div;b.parentNode!=a&&(b.parentNode&&b.parentNode.removeChild(b),a.appendChild(b));this._updateWidgetPosition({x:f,y:e,width:c,height:d})}},
_updateWidgetPosition:function(a){var b=this._widget;c.style(b.domNode,{position:"absolute",left:a.x+"px",top:a.y+"px",width:a.width+"px",height:a.height+"px"});b.srcNodeRef&&c.style(b.srcNodeRef,{position:"absolute",left:a.x+"px",top:a.y+"px",width:a.width+"px",height:a.height+"px"});g.isFunction(b.resize)&&b.resize({w:a.width,h:a.height})},remove:function(){var a=this.getWidget();if(a)a=a.domNode,a.parentNode&&a.parentNode.removeChild(a)}})});