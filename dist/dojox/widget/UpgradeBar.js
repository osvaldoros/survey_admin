//>>built
define(["dijit","dojo","dojox","dojo/require!dojo/window,dojo/fx,dojo/cookie,dijit/_Widget,dijit/_Templated"],function(d,a){a.provide("dojox.widget.UpgradeBar");a.require("dojo.window");a.require("dojo.fx");a.require("dojo.cookie");a.require("dijit._Widget");a.require("dijit._Templated");a.experimental("dojox.widget.UpgradeBar");a.declare("dojox.widget.UpgradeBar",[d._Widget,d._Templated],{notifications:[],buttonCancel:"Close for now",noRemindButton:"Don't Remind Me Again",templateString:a.cache("dojox.widget",
"UpgradeBar/UpgradeBar.html",'<div class="dojoxUpgradeBar">\n\t<div class="dojoxUpgradeBarMessage" dojoAttachPoint="messageNode">message</div>\n\t<div class="dojoxUpgradeBarReminderButton" dojoAttachPoint="dontRemindButtonNode" dojoAttachEvent="onclick:_onDontRemindClick">${noRemindButton}</div>\n\t<span dojoAttachPoint="closeButtonNode" class="dojoxUpgradeBarCloseIcon" dojoAttachEvent="onclick: hide, onmouseenter: _onCloseEnter, onmouseleave: _onCloseLeave" title="${buttonCancel}"></span>\n</div>'),
constructor:function(b,c){!b.notifications&&c&&a.forEach(c.childNodes,function(b){if(b.nodeType==1){var c=a.attr(b,"validate");this.notifications.push({message:b.innerHTML,validate:function(){var b=!0;try{b=a.eval(c)}catch(d){}return b}})}},this)},checkNotifications:function(){if(this.notifications.length)for(var a=0;a<this.notifications.length;a++)if(this.notifications[a].validate()){this.notify(this.notifications[a].message);break}},postCreate:function(){this.inherited(arguments);this.domNode.parentNode&&
a.style(this.domNode,"display","none");a.mixin(this.attributeMap,{message:{node:"messageNode",type:"innerHTML"}});this.noRemindButton||a.destroy(this.dontRemindButtonNode);if(a.isIE==6){var b=this,c=function(){var c=a.window.getBox();a.style(b.domNode,"width",c.w+"px")};this.connect(window,"resize",function(){c()});c()}a.addOnLoad(this,"checkNotifications")},notify:function(b){a.cookie("disableUpgradeReminders")||((!this.domNode.parentNode||!this.domNode.parentNode.innerHTML)&&document.body.appendChild(this.domNode),
a.style(this.domNode,"display",""),b&&this.set("message",b))},show:function(){this._bodyMarginTop=a.style(a.body(),"marginTop");this._size=a.contentBox(this.domNode).h;a.style(this.domNode,{display:"block",height:0,opacity:0});if(!this._showAnim)this._showAnim=a.fx.combine([a.animateProperty({node:a.body(),duration:500,properties:{marginTop:this._bodyMarginTop+this._size}}),a.animateProperty({node:this.domNode,duration:500,properties:{height:this._size,opacity:1}})]);this._showAnim.play()},hide:function(){if(!this._hideAnim)this._hideAnim=
a.fx.combine([a.animateProperty({node:a.body(),duration:500,properties:{marginTop:this._bodyMarginTop}}),a.animateProperty({node:this.domNode,duration:500,properties:{height:0,opacity:0}})]),a.connect(this._hideAnim,"onEnd",this,function(){a.style(this.domNode,"display","none")});this._hideAnim.play()},_onDontRemindClick:function(){a.cookie("disableUpgradeReminders",!0,{expires:3650});this.hide()},_onCloseEnter:function(){a.addClass(this.closeButtonNode,"dojoxUpgradeBarCloseIcon-hover")},_onCloseLeave:function(){a.removeClass(this.closeButtonNode,
"dojoxUpgradeBarCloseIcon-hover")}})});