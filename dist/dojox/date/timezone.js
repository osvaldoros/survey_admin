//>>built
define("dojox/date/timezone",["dojo","dojo/date","dojo/date/locale","dojo/_base/array","dojo/_base/xhr"],function(i,l,p){function y(a){a=a||{};j=i.mixin(j,a.zones||{});o=i.mixin(o,a.rules||{})}function s(a){t[a]=!0;i.xhrGet({url:H+"/"+a,sync:!0,handleAs:"olson-zoneinfo",load:y,error:function(a){console.error("Error loading zone file:",a);throw a;}})}function z(a){throw Error('Timezone "'+a+'" is either incorrect, or not loaded in the timezone registry.');}function u(a){var c=I[a];if(!c&&(c=a.split("/")[0],
c=J[c],!c)){var e=j[a];if(typeof e=="string")return u(e);else if(t.backward)z(a);else return s("backward"),u(a)}return c}function v(a){a=a.match(/(\d+)(?::0*(\d*))?(?::0*(\d*))?([su])?$/);if(!a)return null;a[1]=parseInt(a[1],10);a[2]=a[2]?parseInt(a[2],10):0;a[3]=a[3]?parseInt(a[3],10):0;return a}function r(a,c,e,d,b,f,g){return Date.UTC(a,c,e,d,b,f)+(g||0)*6E4}function q(a){var c=v(a);if(c===null)return 0;c=(a.indexOf("-")===0?-1:1)*((c[1]*60+c[2])*60+c[3])*1E3;return-c/60/1E3}function A(a,c,e){var d=
B[a[3].substr(0,3).toLowerCase()],b=a[4],f=v(a[5]);f[4]=="u"&&(e=0);if(isNaN(b))if(b.substr(0,4)=="last")return b=C[b.substr(4,3).toLowerCase()],a=new Date(r(c,d+1,1,f[1]-24,f[2],f[3],e)),e=l.add(a,"minute",-e).getUTCDay(),b=b>e?b-e-7:b-e,b!==0&&(a=l.add(a,"hour",b*24)),a;else{if(b=C[b.substr(0,3).toLowerCase()],b!="undefined")if(a[4].substr(3,2)==">=")return a=new Date(r(c,d,parseInt(a[4].substr(5),10),f[1],f[2],f[3],e)),e=l.add(a,"minute",-e).getUTCDay(),b=b<e?b-e+7:b-e,b!==0&&(a=l.add(a,"hour",
b*24)),a;else if(b.substr(3,2)=="<=")return a=new Date(r(c,d,parseInt(a[4].substr(5),10),f[1],f[2],f[3],e)),e=l.add(a,"minute",-e).getUTCDay(),b=b>e?b-e-7:b-e,b!==0&&(a=l.add(a,"hour",b*24)),a}else return a=new Date(r(c,d,parseInt(b,10),f[1],f[2],f[3],e));return null}function K(a,c){var e=[];i.forEach(o[a[1]]||[],function(d){for(var b=0;b<2;b++)switch(d[b]){case "min":d[b]=D;break;case "max":d[b]=w;break;case "only":break;default:if(d[b]=parseInt(d[b],10),isNaN(d[b]))throw Error("Invalid year found on rule");
}typeof d[6]=="string"&&(d[6]=q(d[6]));(d[0]<=c&&d[1]>=c||d[0]==c&&d[1]=="only")&&e.push({r:d,d:A(d,c,a[0])})});return e}function L(a,c){for(var e=x[a]=[],d=0;d<c.length;d++){var b=c[d],f=e[d]=[],g=null,m=null,h=[];typeof b[0]=="string"&&(b[0]=q(b[0]));d===0?f[0]=Date.UTC(D,0,1,0,0,0,0):(f[0]=e[d-1][1],g=c[d-1],m=e[d-1],h=m[2]);for(var k=(new Date(f[0])).getUTCFullYear(),n=b[3]?parseInt(b[3],10):w,j=[];k<=n;k++)j=j.concat(K(b,k));j.sort(function(a,b){return l.compare(a.d,b.d)});for(k=0;n=j[k];k++){var p=
k>0?j[k-1]:null;if(n.r[5].indexOf("u")<0&&n.r[5].indexOf("s")<0)if(k===0&&d>0)n.d=h.length?l.add(n.d,"minute",h[h.length-1].r[6]):l.compare(new Date(m[1]),n.d,"date")===0?new Date(m[1]):l.add(n.d,"minute",q(g[1]));else if(k>0)n.d=l.add(n.d,"minute",p.r[6])}f[2]=j;if(b[3]){var m=parseInt(b[3],10),h=B[(b[4]||"Jan").substr(0,3).toLowerCase()],k=parseInt(b[5]||"1",10),g=v(b[6]||"0"),o=f[1]=r(m,h,k,g[1],g[2],g[3],g[4]=="u"?0:b[0]);isNaN(o)&&(o=f[1]=A([0,0,0,b[4],b[5],b[6]||"0"],m,g[4]=="u"?0:b[0]).getTime());
m=i.filter(j,function(a,b){var c=b>0?j[b-1].r[6]*6E4:0;return a.d.getTime()<o+c});g[4]!="u"&&g[4]!="s"&&(f[1]+=m.length?m[m.length-1].r[6]*6E4:q(b[1])*6E4)}else f[1]=Date.UTC(w,11,31,23,59,59,999)}}function E(a,c){for(var e=c,d=j[e];typeof d=="string";)e=d,d=j[e];if(!d){if(!t.backward)return s("backward",!0),E(a,c);z(e)}x[c]||L(c,d);for(var e=x[c],b=a.getTime(),f=0,g;g=e[f];f++)if(b>=g[0]&&b<g[1])return{zone:d[f],range:e[f],idx:f};throw Error('No Zone found for "'+c+'" on '+a);}i.experimental("dojox.date.timezone");
i.getObject("date.timezone",!0,dojox);var h=i.config,M=["africa","antarctica","asia","australasia","backward","etcetera","europe","northamerica","pacificnew","southamerica"],D=1835,w=2038,t={},j={},x={},o={},H=h.timezoneFileBasePath||i.moduleUrl("dojox.date","zoneinfo"),F=h.timezoneLoadingScheme||"preloadAll",h=h.defaultZoneFile||(F=="preloadAll"?M:"northamerica");i._contentHandlers["olson-zoneinfo"]=function(a){for(var a=i._contentHandlers.text(a).split("\n"),c=[],e="",d=null,e=null,b={zones:{},
rules:{}},f=0;f<a.length;f++)if(c=a[f],c.match(/^\s/)&&(c="Zone "+d+c),c=c.split("#")[0],c.length>3)switch(c=c.split(/\s+/),e=c.shift(),e){case "Zone":d=c.shift();c[0]&&(b.zones[d]||(b.zones[d]=[]),b.zones[d].push(c));break;case "Rule":e=c.shift();b.rules[e]||(b.rules[e]=[]);b.rules[e].push(c);break;case "Link":if(b.zones[c[1]])throw Error("Error with Link "+c[1]);b.zones[c[1]]=c[0]}return b};var B={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},C={sun:0,mon:1,tue:2,wed:3,
thu:4,fri:5,sat:6},J={EST:"northamerica",MST:"northamerica",HST:"northamerica",EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:"northamerica",PST8PDT:"northamerica",America:"northamerica",Pacific:"australasia",Atlantic:"europe",Africa:"africa",Indian:"africa",Antarctica:"antarctica",Asia:"asia",Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:"europe",EET:"europe"},I={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa",
"Indian/Kerguelen":"antarctica","Indian/Chagos":"asia","Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":"europe","Asia/Irkutsk":"europe","Asia/Yakutsk":"europe","Asia/Vladivostok":"europe","Asia/Sakhalin":"europe","Asia/Magadan":"europe","Asia/Kamchatka":"europe",
"Asia/Anadyr":"europe","Africa/Ceuta":"europe","America/Argentina/Buenos_Aires":"southamerica","America/Argentina/Cordoba":"southamerica","America/Argentina/Tucuman":"southamerica","America/Argentina/La_Rioja":"southamerica","America/Argentina/San_Juan":"southamerica","America/Argentina/Jujuy":"southamerica","America/Argentina/Catamarca":"southamerica","America/Argentina/Mendoza":"southamerica","America/Argentina/Rio_Gallegos":"southamerica","America/Argentina/Ushuaia":"southamerica","America/Aruba":"southamerica",
"America/La_Paz":"southamerica","America/Noronha":"southamerica","America/Belem":"southamerica","America/Fortaleza":"southamerica","America/Recife":"southamerica","America/Araguaina":"southamerica","America/Maceio":"southamerica","America/Bahia":"southamerica","America/Sao_Paulo":"southamerica","America/Campo_Grande":"southamerica","America/Cuiaba":"southamerica","America/Porto_Velho":"southamerica","America/Boa_Vista":"southamerica","America/Manaus":"southamerica","America/Eirunepe":"southamerica",
"America/Rio_Branco":"southamerica","America/Santiago":"southamerica","Pacific/Easter":"southamerica","America/Bogota":"southamerica","America/Curacao":"southamerica","America/Guayaquil":"southamerica","Pacific/Galapagos":"southamerica","Atlantic/Stanley":"southamerica","America/Cayenne":"southamerica","America/Guyana":"southamerica","America/Asuncion":"southamerica","America/Lima":"southamerica","Atlantic/South_Georgia":"southamerica","America/Paramaribo":"southamerica","America/Port_of_Spain":"southamerica",
"America/Montevideo":"southamerica","America/Caracas":"southamerica"},G={US:"S",Chatham:"S",NZ:"S",NT_YK:"S",Edm:"S",Salv:"S",Canada:"S",StJohns:"S",TC:"S",Guat:"S",Mexico:"S",Haiti:"S",Barb:"S",Belize:"S",CR:"S",Moncton:"S",Swift:"S",Hond:"S",Thule:"S",NZAQ:"S",Zion:"S",ROK:"S",PRC:"S",Taiwan:"S",Ghana:"GMT",SL:"WAT",Chicago:"S",Detroit:"S",Vanc:"S",Denver:"S",Halifax:"S",Cuba:"S",Indianapolis:"S",Starke:"S",Marengo:"S",Pike:"S",Perry:"S",Vincennes:"S",Pulaski:"S",Louisville:"S",CA:"S",Nic:"S",Menominee:"S",
Mont:"S",Bahamas:"S",NYC:"S",Regina:"S",Resolute:"ES",DR:"S",Toronto:"S",Winn:"S"};i.setObject("dojox.date.timezone",{getTzInfo:function(a,c){if(F=="lazyLoad"){var e=u(c);if(e)t[e]||s(e);else throw Error("Not a valid timezone ID.");}var d=E(a,c),e=d.zone[0],b;var f=-1;b=d.range[2]||[];for(var g=a.getTime(),h=0,i;i=b[h];h++)g>=i.d.getTime()&&(f=h);b=f>=0?b[f].r:null;e+=b?b[6]:o[d.zone[1]]&&d.idx>0?q(j[c][d.idx-1][1]):q(d.zone[1]);g=d.zone;f=g[2];f.indexOf("%s")>-1?(b?(d=b[7],d=="-"&&(d="")):g[1]in
G?d=G[g[1]]:d.idx>0?(d=j[c][d.idx-1][2],d=d.indexOf("%s")<0?f.replace("%s","S")==d?"S":"":""):d="",d=f.replace("%s",d)):f.indexOf("/")>-1?(d=f.split("/"),d=b?d[b[6]===0?0:1]:d[0]):d=f;return{tzOffset:e,tzAbbr:d}},loadZoneData:function(a){y(a)},getAllZones:function(){var a=[],c;for(c in j)a.push(c);a.sort();return a}});typeof h=="string"&&h&&(h=[h]);i.isArray(h)&&i.forEach(h,s);var N=p.format,O=p._getZone;p.format=function(a,c){c=c||{};if(c.timezone&&!c._tzInfo)c._tzInfo=dojox.date.timezone.getTzInfo(a,
c.timezone);if(c._tzInfo)var e=a.getTimezoneOffset()-c._tzInfo.tzOffset,a=new Date(a.getTime()+e*6E4);return N.call(this,a,c)};p._getZone=function(a,c,e){if(e._tzInfo)return c?e._tzInfo.tzAbbr:e._tzInfo.tzOffset;return O.call(this,a,c,e)}});