//>>built
define("dojox/gauges/AnalogIndicatorBase",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/fx","dojox/gfx","./_Indicator"],function(p,q,r,s,j,t){return q("dojox.gauges.AnalogIndicatorBase",[t],{draw:function(h,e){if(this.shape)this._move(e);else{if(this.text)this.text.parent.remove(this.text),this.text=null;var c=this._gauge._getAngle(Math.min(Math.max(this.value,this._gauge.min),this._gauge.max));this.color=this.color||"#000000";this.length=this.length||this._gauge.radius;
this.width=this.width||1;this.offset=this.offset||0;this.highlight=this.highlight||"#D0D0D0";var b=this._getShapes(h,this._gauge,this);if(b){if(b.length>1){this.shape=h.createGroup();for(var f=0;f<b.length;f++)this.shape.add(b[f])}else this.shape=b[0];this.shape.setTransform([{dx:this._gauge.cx,dy:this._gauge.cy},j.matrix.rotateg(c)]);this.shape.connect("onmouseover",this,this.handleMouseOver);this.shape.connect("onmouseout",this,this.handleMouseOut);this.shape.connect("onmousedown",this,this.handleMouseDown);
this.shape.connect("touchstart",this,this.handleTouchStart)}if(this.label)(b=this.direction)||(b="outside"),f=b=="inside"?-this.length+this.offset-5:this.length+this.offset+5,c=this._gauge._getRadians(90-c),this._layoutLabel(h,this.label+"",this._gauge.cx,this._gauge.cy,f,c,b);this.currentValue=this.value}},_layoutLabel:function(h,e,c,b,f,g,k){var i=this.font?this.font:j.defaultFont,o=j._base._getTextBox(e,{font:j.makeFontString(j.makeParameters(j.defaultFont,i))}).w,i=j.normalizedLength(i.size),
l=c+Math.cos(g)*f-o/2,m=b-Math.sin(g)*f-i/2,a,n=[];a=l;var d;d=-Math.tan(g)*a+b+Math.tan(g)*c;d>=m&&d<=m+i&&n.push({x:a,y:d});a=l+o;d=-Math.tan(g)*a+b+Math.tan(g)*c;d>=m&&d<=m+i&&n.push({x:a,y:d});a=m;d=-1/Math.tan(g)*a+c+1/Math.tan(g)*b;d>=l&&d<=l+o&&n.push({x:d,y:a});a=m+i;d=-1/Math.tan(g)*a+c+1/Math.tan(g)*b;d>=l&&d<=l+o&&n.push({x:d,y:a});if(k=="inside")for(k=0;k<n.length;k++){if(a=n[k],a=this._distance(a.x,a.y,c,b)-f,a>=0){l=c+Math.cos(g)*(f-a)-o/2;m=b-Math.sin(g)*(f-a)-i/2;break}}else for(k=
0;k<n.length;k++)if(a=n[k],a=this._distance(a.x,a.y,c,b)-f,a<=0){l=c+Math.cos(g)*(f-a)-o/2;m=b-Math.sin(g)*(f-a)-i/2;break}this.text=this._gauge.drawText(h,e,l+o/2,m+i,"middle",this.color,this.font)},_distance:function(h,e,c,b){return Math.sqrt((c-h)*(c-h)+(b-e)*(b-e))},_move:function(h){var e=Math.min(Math.max(this.value,this._gauge.min),this._gauge.max),c=this.currentValue;h?(h=this._gauge._getAngle(e),this.shape.setTransform([{dx:this._gauge.cx,dy:this._gauge.cy},j.matrix.rotateg(h)]),this.currentValue=
e):c!=e&&(e=new s.Animation({curve:[c,e],duration:this.duration,easing:this.easing}),r.connect(e,"onAnimate",p.hitch(this,function(b){this.shape.setTransform([{dx:this._gauge.cx,dy:this._gauge.cy},j.matrix.rotateg(this._gauge._getAngle(b))]);this.currentValue=b})),e.play())}})});