//>>built
define("dojox/layout/ResizeHandle",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/event","dojo/_base/fx","dojo/_base/window","dojo/fx","dojo/window","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dijit/_base/manager","dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(h,i,f,o,p,k,j,q,v,r,l,g,e,m,n,s,t){h.experimental("dojox.layout.ResizeHandle");var h=t("dojox.layout.ResizeHandle",[n,s],{targetId:"",targetContainer:null,
resizeAxis:"xy",activeResize:!1,activeResizeClass:"dojoxResizeHandleClone",animateSizing:!0,animateMethod:"chain",animateDuration:225,minHeight:100,minWidth:100,constrainMax:!1,maxHeight:0,maxWidth:0,fixedAspect:!1,intermediateChanges:!1,startTopic:"/dojo/resize/start",endTopic:"/dojo/resize/stop",templateString:'<div dojoAttachPoint="resizeHandle" class="dojoxResizeHandle"><div></div></div>',postCreate:function(){this.connect(this.resizeHandle,"onmousedown","_beginSizing");if(this.activeResize)this.animateSizing=
!1;else if(this._resizeHelper=m.byId("dojoxGlobalResizeHelper"),!this._resizeHelper)this._resizeHelper=(new u({id:"dojoxGlobalResizeHelper"})).placeAt(j.body()),l.add(this._resizeHelper.domNode,this.activeResizeClass);if(!this.minSize)this.minSize={w:this.minWidth,h:this.minHeight};if(this.constrainMax)this.maxSize={w:this.maxWidth,h:this.maxHeight};this._resizeX=this._resizeY=!1;var a=i.partial(l.add,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case "xy":this._resizeX=this._resizeY=!0;
a("dojoxResizeNW");break;case "x":this._resizeX=!0;a("dojoxResizeW");break;case "y":this._resizeY=!0,a("dojoxResizeN")}},_beginSizing:function(a){if(!this._isSizing){f.publish(this.startTopic,[this]);this.targetDomNode=(this.targetWidget=m.byId(this.targetId))?this.targetWidget.domNode:r.byId(this.targetId);if(this.targetContainer)this.targetDomNode=this.targetContainer;if(this.targetDomNode){if(!this.activeResize){var b=g.position(this.targetDomNode,!0);this._resizeHelper.resize({l:b.x,t:b.y,w:b.w,
h:b.h});this._resizeHelper.show()}this._isSizing=!0;this.startPoint={x:a.clientX,y:a.clientY};var b=e.getComputedStyle(this.targetDomNode),c=g.boxModel==="border-model"?{w:0,h:0}:g.getPadBorderExtents(this.targetDomNode,b),d=g.getMarginExtents(this.targetDomNode,b);this.startSize={w:e.get(this.targetDomNode,"width",b),h:e.get(this.targetDomNode,"height",b),pbw:c.w,pbh:c.h,mw:d.w,mh:d.h};this._pconnects=[f.connect(j.doc,"onmousemove",this,"_updateSizing"),f.connect(j.doc,"onmouseup",this,"_endSizing")];
p.stop(a)}}},_updateSizing:function(a){if(this.activeResize)this._changeSizing(a);else{var b=this._getNewCoords(a,"border");if(b===!1)return;this._resizeHelper.resize(b)}a.preventDefault()},_getNewCoords:function(a,b){try{if(!a.clientX||!a.clientY)return!1}catch(c){return!1}this._activeResizeLastEvent=a;var d=(this.isLeftToRight()?1:-1)*(this.startPoint.x-a.clientX),e=this.startPoint.y-a.clientY,d=this._checkConstraints(this.startSize.w-(this._resizeX?d:0),this.startSize.h-(this._resizeY?e:0));switch(b){case "margin":d.w+=
this.startSize.mw,d.h+=this.startSize.mh;case "border":d.w+=this.startSize.pbw,d.h+=this.startSize.pbh}return d},_checkConstraints:function(a,b){if(this.minSize){var c=this.minSize;if(a<c.w)a=c.w;if(b<c.h)b=c.h}if(this.constrainMax&&this.maxSize){c=this.maxSize;if(a>c.w)a=c.w;if(b>c.h)b=c.h}if(this.fixedAspect){var c=this.startSize.w,d=this.startSize.h,e=c*b-d*a;e<0?a=b*c/d:e>0&&(b=a*d/c)}return{w:a,h:b}},_changeSizing:function(a){var b=this.targetWidget&&i.isFunction(this.targetWidget.resize),c=
this._getNewCoords(a,b&&"margin");if(c!==!1&&(b?this.targetWidget.resize(c):this.animateSizing?q[this.animateMethod]([k.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:c.w}},duration:this.animateDuration}),k.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,end:c.h}},duration:this.animateDuration})]).play():e.set(this.targetDomNode,{width:c.w+"px",height:c.h+"px"}),this.intermediateChanges))this.onResize(a)},_endSizing:function(a){o.forEach(this._pconnects,
f.disconnect);var b=i.partial(f.publish,this.endTopic,[this]);this.activeResize?b():(this._resizeHelper.hide(),this._changeSizing(a),setTimeout(b,this.animateDuration+15));this._isSizing=!1;this.onResize(a)},onResize:function(){}}),u=dojo.declare("dojox.layout._ResizeHelper",n,{show:function(){e.set(this.domNode,"display","")},hide:function(){e.set(this.domNode,"display","none")},resize:function(a){g.setMarginBox(this.domNode,a)}});return h});