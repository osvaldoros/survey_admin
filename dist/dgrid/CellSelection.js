//>>built
define("dgrid/CellSelection",["dojo/_base/declare","./Selection","dojo/on","put-selector/put","dojo/has"],function(m,n,o,j){return m([n],{selectionDelegate:".dgrid-cell",select:function(a,g,d){var c,e;d===void 0&&(d=!0);if(typeof a!="object"||!("element"in a))a=this.cell(a);else if(!a.row){for(e in d)this.select(this.cell(a.id,e),null,d[e]);return}if(this.allowSelect(a)){var f=a.row.id,b=this.selection[f];if(a.column){var k=b&&b[a.column.id];d===null&&(d=!k);var h=a.element,b=b||{};b[a.column.id]=
d;this.selection[f]=b;var l=!1;for(c in b)if(b[c]===!0){l=!0;break}l||delete this.selection[f];h&&(d?j(h,".dgrid-selected.ui-state-active"):j(h,"!dgrid-selected!ui-state-active"));d!=k&&h&&this._selectionEventQueue(d,"cells").push(a);if(g){g.element||(g=this.cell(g));b=g.element;c=a.element;d=b&&(b.compareDocumentPosition?b.compareDocumentPosition(c)==2:b.sourceIndex>c.sourceIndex)?"nextSibling":"previousSibling";c=a.column.id;var b=g.column.id,i,f=[];for(e in this.columns)if(i&&f.push(e),e==c&&(c=
f)||e==b&&(b=f)){f.push(e);if(i||c==f&&e==b)break;i=!0}e=a.row.element;b=g.row.element;do{for(c=0;c<f.length;c++)a=this.cell(e,f[c]),this.select(a);if(e==b)break}while(e=a.row.element[d])}}else for(c in this.columns)this.select(this.cell(f,c),null,d)}},isSelected:function(a,g){if(!a)return!1;a.element||(a=this.cell(a,g));return this.selection[a.row.id]&&!!this.selection[a.row.id][a.column.id]},clearSelection:function(){this.inherited(arguments)}})});