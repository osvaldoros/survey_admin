//>>built
define("dgrid/extensions/ColumnHider",["dojo/_base/declare","dojo/has","dojo/on","dojo/query","dojo/dom","put-selector/put","dojo/NodeList-dom","xstyle/css!../css/extensions/ColumnHider.css"],function(k,l,e,m,n,f){var h,g;return k([],{hiderMenuNode:null,hiderToggleNode:null,hiderMenuOpened:!1,_columnStyleRules:null,renderHeader:function(){var b=this,a=this.hiderMenuNode,d=this.hiderToggleNode,c,i,j;this.inherited(arguments);if(a){for(c in this._columnStyleRules)this._columnStyleRules[c].remove();
a.innerHTML=""}else d=this.hiderToggleNode=f(this.headerScrollNode,"div.dgrid-hider-toggle.dgrid-cell-padding","+"),this._listeners.push(e(d,"click",function(a){b._toggleHiderMenu(a)})),a=this.hiderMenuNode=f("div#dgrid-hider-menu-"+this.id+".dgrid-hider-menu"),a.style.display="none",f(this.domNode,a),this._listeners.push(e(a,".dgrid-hider-menu-check:"+(l("ie")<9?"click":"change"),function(a){b._toggleColumnState(a)})),this._listeners.push(e(a,"mousedown",function(a){a.stopPropagation()})),g||(g=
e.pausable(document.body,"mousedown",function(a){h&&h._toggleHiderMenu(a)}),g.pause());this._columnStyleRules={};for(c in this.columns)if(d=this.columns[c],!d.unhidable)i=f(a,"div.dgrid-hider-menu-row"),j=b.domNode.id+"-hider-menu-check-"+c,i.innerHTML='<input type="checkbox" id="'+j+'" class="dgrid-hider-menu-check hider-menu-check-'+c+'"><label class="dgrid-hider-menu-label hider-menu-label-'+c+'" for="'+j+'">'+d.label.replace(/</g,"&lt;")+"</label>",d.hidden?this._columnStyleRules[c]=b.styleColumn(c,
"display: none"):i.firstChild.checked=!0},isColumnHidden:function(b){return!!this._columnStyleRules[b]},_toggleHiderMenu:function(){var b=this.hiderMenuOpened;this.hiderMenuNode.style.display=b?"none":"";g[b?"pause":"resume"]();h=b?null:this;this.hiderMenuOpened=!b},_toggleColumnState:function(b){var a=b.target.id.substr(this.id.length+18);this._columnStyleRules[a]?(this._columnStyleRules[a].remove(),delete this._columnStyleRules[a]):this._columnStyleRules[a]=this.styleColumn(a,"display: none;");
e.emit(this.domNode,"dgrid-columnstatechange",{column:this.columns[a],hidden:!b.target.checked});this.resize()}})});